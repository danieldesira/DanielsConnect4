{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/board-logic.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/constants.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/enums/coin.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/enums/dimensions.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/index.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/action-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/current-turn-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/disconnect-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/error-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/game-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/initial-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/skip-turn-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/tie-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/models/winner-message.js","webpack:///./node_modules/@danieldesira/daniels-connect4-common/lib/player-turn.js","webpack:///./src/lib/authentication.ts","webpack:///./src/lib/config.ts","webpack:///./src/lib/dialog/dialog.ts","webpack:///./src/lib/dialog/enums/dialog-type.ts","webpack:///./src/lib/enums/dialog-ids.ts","webpack:///./src/lib/enums/game-mode.ts","webpack:///./src/lib/enums/sound.ts","webpack:///./src/lib/game.ts","webpack:///./src/lib/network-game.ts","webpack:///./src/lib/player-name-section.ts","webpack:///./src/lib/position.ts","webpack:///./src/lib/same-device-game.ts","webpack:///./src/lib/socket.ts","webpack:///./src/lib/timer.ts","webpack:///./src/lib/utils.ts","webpack:///./src/main.ts","webpack:///webpack/bootstrap","webpack:///webpack/startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BoardLogic = void 0;\nvar constants_1 = require(\"./constants\");\nvar coin_1 = require(\"./enums/coin\");\nvar dimensions_1 = require(\"./enums/dimensions\");\nvar BoardLogic = /** @class */ (function () {\n    /**\n     * Initialises the board matrix given the board dimensions\n     * @param dim The board dimensions type\n     */\n    function BoardLogic(dim) {\n        var _this = this;\n        this.board = [];\n        /**\n         * Getter for the number of columns\n         * @returns The number of columns\n         */\n        this.getColumns = function () { return _this.columns; };\n        /**\n         * Getter for the number of rows\n         * @returns The number of rows\n         */\n        this.getRows = function () { return _this.rows; };\n        /**\n         * Getter for the board matrix\n         * @returns The board matrix\n         */\n        this.getBoard = function () { return _this.board; };\n        /**\n         * Resets the board matrix retaining the given dimensions\n         */\n        this.resetBoard = function () { return _this.initBoard(); };\n        switch (dim) {\n            case dimensions_1.BoardDimensions.Small:\n                this.columns = constants_1.dimensions.small.columns;\n                this.rows = constants_1.dimensions.small.rows;\n                break;\n            case dimensions_1.BoardDimensions.Medium:\n                this.columns = constants_1.dimensions.medium.columns;\n                this.rows = constants_1.dimensions.medium.rows;\n                break;\n            case dimensions_1.BoardDimensions.Large:\n                this.columns = constants_1.dimensions.large.columns;\n                this.rows = constants_1.dimensions.large.rows;\n                break;\n        }\n        this.initBoard();\n    }\n    /**\n     * Initialises board matrix\n     */\n    BoardLogic.prototype.initBoard = function () {\n        this.board = new Array(this.columns);\n        for (var col = 0; col < this.columns; col++) {\n            this.board[col] = new Array(this.rows);\n            for (var row = 0; row < this.rows; row++) {\n                this.board[col][row] = coin_1.Coin.Empty;\n            }\n        }\n    };\n    /**\n     * Counts and checks the coin placeholders adjecent to the specified point (column x row). Matches may occurr,\n     * vertically, horizontally or diagonally.\n     * @param column - The column number of the starting point\n     * @param row - The row number of the starting point\n     * @param currentTurn - Coin color to be checked\n     * @returns Count of adjecent coins with the same color\n     */\n    BoardLogic.prototype.countConsecutiveCoins = function (column, row, currentTurn) {\n        var count = row;\n        var coinCount = 0;\n        // Vertical check\n        while (coinCount < 4 && count < this.rows && this.board[column][count] === currentTurn) {\n            coinCount++;\n            count++;\n        }\n        if (coinCount < 4) {\n            // Horizontal check\n            coinCount = 0;\n            count = column;\n            while (count < this.columns && this.board[count][row] === currentTurn) {\n                coinCount++;\n                count++;\n            }\n            count = column - 1;\n            while (count > -1 && this.board[count][row] === currentTurn) {\n                coinCount++;\n                count--;\n            }\n            // Diagonal checks\n            if (coinCount < 4) {\n                coinCount = 0;\n                var rowCount = row - 1;\n                var colCount = column + 1;\n                while (coinCount < 4 && rowCount > -1 && colCount < this.columns && this.board[colCount][rowCount] === currentTurn) {\n                    coinCount++;\n                    colCount++; //right columns\n                    rowCount--; //upper rows\n                }\n                colCount = column;\n                rowCount = row;\n                while (coinCount < 4 && rowCount < this.rows && colCount > -1 && this.board[colCount][rowCount] === currentTurn) {\n                    coinCount++;\n                    colCount--; // left columns\n                    rowCount++; // lower rows\n                }\n                if (coinCount < 4) {\n                    coinCount = 0;\n                    rowCount = row - 1;\n                    colCount = column - 1;\n                    while (coinCount < 4 && rowCount > -1 && colCount > -1 && this.board[colCount][rowCount] === currentTurn) {\n                        coinCount++;\n                        colCount--; // left columns\n                        rowCount--; // upper rows\n                    }\n                    colCount = column;\n                    rowCount = row;\n                    while (coinCount < 4 && rowCount < this.rows && colCount < this.columns && this.board[colCount][rowCount] === currentTurn) {\n                        coinCount++;\n                        colCount++; // right columns\n                        rowCount++; // lower rows\n                    }\n                }\n            }\n        }\n        return coinCount;\n    };\n    /**\n     * Checks if the board matrix is full\n     * @returns True if full, false if not\n     */\n    BoardLogic.prototype.isBoardFull = function () {\n        var full = true;\n        for (var col = 0; col < this.columns; col++) {\n            // Check upper row in every column\n            if (this.board[col][0] === coin_1.Coin.Empty) {\n                full = false;\n                break;\n            }\n        }\n        return full;\n    };\n    /**\n     * Places coin in a specific column\n     * @param color The color of the coin\n     * @param column The specified column number\n     * @returns Row number where the coin was placed. -1 if column is full.\n     */\n    BoardLogic.prototype.putCoin = function (color, column) {\n        for (var row = this.rows - 1; row >= 0; row--) {\n            if (this.board[column][row] === coin_1.Coin.Empty) {\n                this.board[column][row] = color;\n                return row;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Board matrix setter\n     * @param board The new board matrix\n     */\n    BoardLogic.prototype.setBoard = function (board) {\n        this.board = board;\n    };\n    /**\n     * Sets a single board matrix item, at the specified row and column\n     * @param coin The coin color\n     * @param col The column number\n     * @param row The row number\n     */\n    BoardLogic.prototype.setBoardItem = function (coin, col, row) {\n        this.board[col][row] = coin;\n    };\n    return BoardLogic;\n}());\nexports.BoardLogic = BoardLogic;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dimensions = exports.skipTurnMaxWait = void 0;\n/**\n * @constant {number} skipTurnMaxWait - The maximum number of seconds that are allowed before skipping turn.\n */\nexports.skipTurnMaxWait = 60;\n/**\n * @constant dimensions - The column & row board dimensions available.\n */\nexports.dimensions = {\n    small: {\n        columns: 6,\n        rows: 5\n    },\n    medium: {\n        columns: 7,\n        rows: 6\n    },\n    large: {\n        columns: 9,\n        rows: 8\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Coin = void 0;\nvar Coin;\n(function (Coin) {\n    Coin[Coin[\"Empty\"] = 0] = \"Empty\";\n    Coin[Coin[\"Red\"] = 1] = \"Red\";\n    Coin[Coin[\"Green\"] = 2] = \"Green\";\n})(Coin || (exports.Coin = Coin = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BoardDimensions = void 0;\nvar BoardDimensions;\n(function (BoardDimensions) {\n    BoardDimensions[BoardDimensions[\"Small\"] = 1] = \"Small\";\n    BoardDimensions[BoardDimensions[\"Medium\"] = 2] = \"Medium\";\n    BoardDimensions[BoardDimensions[\"Large\"] = 3] = \"Large\";\n})(BoardDimensions || (exports.BoardDimensions = BoardDimensions = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BoardDimensions = exports.dimensions = exports.skipTurnMaxWait = exports.switchTurn = exports.randomiseColor = exports.WinnerMessage = exports.TieMessage = exports.SkipTurnMessage = exports.InitialMessage = exports.GameMessage = exports.ErrorMessage = exports.DisconnectMessage = exports.CurrentTurnMessage = exports.ActionMessage = exports.Coin = exports.default = void 0;\nvar board_logic_1 = require(\"./board-logic\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return board_logic_1.BoardLogic; } });\nvar coin_1 = require(\"./enums/coin\");\nObject.defineProperty(exports, \"Coin\", { enumerable: true, get: function () { return coin_1.Coin; } });\nvar action_message_1 = require(\"./models/action-message\");\nObject.defineProperty(exports, \"ActionMessage\", { enumerable: true, get: function () { return action_message_1.ActionMessage; } });\nvar current_turn_message_1 = require(\"./models/current-turn-message\");\nObject.defineProperty(exports, \"CurrentTurnMessage\", { enumerable: true, get: function () { return current_turn_message_1.CurrentTurnMessage; } });\nvar disconnect_message_1 = require(\"./models/disconnect-message\");\nObject.defineProperty(exports, \"DisconnectMessage\", { enumerable: true, get: function () { return disconnect_message_1.DisconnectMessage; } });\nvar error_message_1 = require(\"./models/error-message\");\nObject.defineProperty(exports, \"ErrorMessage\", { enumerable: true, get: function () { return error_message_1.ErrorMessage; } });\nvar game_message_1 = require(\"./models/game-message\");\nObject.defineProperty(exports, \"GameMessage\", { enumerable: true, get: function () { return game_message_1.GameMessage; } });\nvar initial_message_1 = require(\"./models/initial-message\");\nObject.defineProperty(exports, \"InitialMessage\", { enumerable: true, get: function () { return initial_message_1.InitialMessage; } });\nvar skip_turn_message_1 = require(\"./models/skip-turn-message\");\nObject.defineProperty(exports, \"SkipTurnMessage\", { enumerable: true, get: function () { return skip_turn_message_1.SkipTurnMessage; } });\nvar tie_message_1 = require(\"./models/tie-message\");\nObject.defineProperty(exports, \"TieMessage\", { enumerable: true, get: function () { return tie_message_1.TieMessage; } });\nvar winner_message_1 = require(\"./models/winner-message\");\nObject.defineProperty(exports, \"WinnerMessage\", { enumerable: true, get: function () { return winner_message_1.WinnerMessage; } });\nvar player_turn_1 = require(\"./player-turn\");\nObject.defineProperty(exports, \"randomiseColor\", { enumerable: true, get: function () { return player_turn_1.randomiseColor; } });\nObject.defineProperty(exports, \"switchTurn\", { enumerable: true, get: function () { return player_turn_1.switchTurn; } });\nvar constants_1 = require(\"./constants\");\nObject.defineProperty(exports, \"skipTurnMaxWait\", { enumerable: true, get: function () { return constants_1.skipTurnMaxWait; } });\nObject.defineProperty(exports, \"dimensions\", { enumerable: true, get: function () { return constants_1.dimensions; } });\nvar dimensions_1 = require(\"./enums/dimensions\");\nObject.defineProperty(exports, \"BoardDimensions\", { enumerable: true, get: function () { return dimensions_1.BoardDimensions; } });\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ActionMessage = void 0;\nvar game_message_1 = require(\"./game-message\");\nvar ActionMessage = /** @class */ (function (_super) {\n    __extends(ActionMessage, _super);\n    /**\n     * @param {number} column - The column number\n     * @param {string} action - The type of action\n     * @param {Coin} color - The coin color\n     */\n    function ActionMessage(column, action, color) {\n        var _this = _super.call(this) || this;\n        _this.column = column;\n        _this.action = action;\n        _this.color = color;\n        return _this;\n    }\n    return ActionMessage;\n}(game_message_1.GameMessage));\nexports.ActionMessage = ActionMessage;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CurrentTurnMessage = void 0;\nvar coin_1 = require(\"../enums/coin\");\nvar game_message_1 = require(\"./game-message\");\nvar CurrentTurnMessage = /** @class */ (function (_super) {\n    __extends(CurrentTurnMessage, _super);\n    function CurrentTurnMessage() {\n        var _this = _super.call(this) || this;\n        _this.currentTurn = coin_1.Coin.Empty;\n        return _this;\n    }\n    return CurrentTurnMessage;\n}(game_message_1.GameMessage));\nexports.CurrentTurnMessage = CurrentTurnMessage;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DisconnectMessage = void 0;\nvar game_message_1 = require(\"./game-message\");\nvar DisconnectMessage = /** @class */ (function (_super) {\n    __extends(DisconnectMessage, _super);\n    function DisconnectMessage() {\n        var _this = _super.call(this) || this;\n        _this.hardDisconnect = true;\n        return _this;\n    }\n    return DisconnectMessage;\n}(game_message_1.GameMessage));\nexports.DisconnectMessage = DisconnectMessage;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ErrorMessage = void 0;\nvar game_message_1 = require(\"./game-message\");\nvar ErrorMessage = /** @class */ (function (_super) {\n    __extends(ErrorMessage, _super);\n    /**\n     * @param {string} error The error message\n     */\n    function ErrorMessage(error) {\n        var _this = _super.call(this) || this;\n        _this.error = error;\n        return _this;\n    }\n    return ErrorMessage;\n}(game_message_1.GameMessage));\nexports.ErrorMessage = ErrorMessage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GameMessage = void 0;\nvar GameMessage = /** @class */ (function () {\n    function GameMessage() {\n    }\n    /**\n     * Tests if message is an initial message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message is initial\n     * @public\n     * @static\n     */\n    GameMessage.isInitialMessage = function (msg) {\n        return (!isNaN(msg['gameId']) && msg['color']) || msg['opponentName'];\n    };\n    /**\n     * Tests if message is an inactivity message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message represents inactivity\n     * @public\n     * @static\n     */\n    GameMessage.isInactivityMessage = function (msg) {\n        return msg['endGameDueToInactivity'] && msg['currentTurn'];\n    };\n    /**\n     * Tests if message is an action message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message represents an action\n     * @public\n     * @static\n     */\n    GameMessage.isActionMessage = function (msg) {\n        return msg['action'] && !isNaN(msg['column']) && msg['color'];\n    };\n    /**\n     * Tests if message is a skip turn message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message is a skip turn\n     * @public\n     * @static\n     */\n    GameMessage.isSkipTurnMessage = function (msg) {\n        return msg['skipTurn'] && msg['currentTurn'];\n    };\n    /**\n     * Tests if message is a winner message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message represents win\n     * @public\n     * @static\n     */\n    GameMessage.isWinnerMessage = function (msg) {\n        return msg['winner'];\n    };\n    /**\n     * Tests if message is a tie message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message represents tie\n     * @public\n     * @static\n     */\n    GameMessage.isTieMessage = function (msg) {\n        return msg['tie'];\n    };\n    /**\n     * Tests if message is a current turn message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message represents current turn\n     * @public\n     * @static\n     */\n    GameMessage.isCurrentTurnMessage = function (msg) {\n        return msg['currentTurn'];\n    };\n    /**\n     * Tests if message is a disconnect message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message represent a disconnection\n     * @public\n     * @static\n     */\n    GameMessage.isDisconnectMessage = function (msg) {\n        return msg['hardDisconnect'];\n    };\n    /**\n     * Tests if message is an error message\n     * @param {*} msg - Object to check\n     * @returns {boolean} Whether message is an error\n     * @public\n     * @static\n     */\n    GameMessage.isErrorMessage = function (msg) {\n        return msg['error'];\n    };\n    return GameMessage;\n}());\nexports.GameMessage = GameMessage;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InitialMessage = void 0;\nvar game_message_1 = require(\"./game-message\");\nvar InitialMessage = /** @class */ (function (_super) {\n    __extends(InitialMessage, _super);\n    /**\n     * @param {number} gameId - The ID of the game\n     * @param {string} playerName - The name of the player\n     * @param {string} opponentName - The name of the opponent\n     * @param {Coin} color - The coin color chosen\n     */\n    function InitialMessage(gameId, playerName, opponentName, color) {\n        var _this = _super.call(this) || this;\n        _this.gameId = gameId;\n        _this.playerName = playerName;\n        _this.opponentName = opponentName;\n        _this.color = color;\n        return _this;\n    }\n    return InitialMessage;\n}(game_message_1.GameMessage));\nexports.InitialMessage = InitialMessage;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SkipTurnMessage = void 0;\nvar game_message_1 = require(\"./game-message\");\nvar SkipTurnMessage = /** @class */ (function (_super) {\n    __extends(SkipTurnMessage, _super);\n    /**\n     * @param {boolean} skipTurn - Whether to skip the current turn\n     * @param {Coin} currentTurn - Coin color to be the new turn\n     */\n    function SkipTurnMessage(skipTurn, currentTurn) {\n        var _this = _super.call(this) || this;\n        _this.skipTurn = skipTurn;\n        _this.currentTurn = currentTurn;\n        return _this;\n    }\n    return SkipTurnMessage;\n}(game_message_1.GameMessage));\nexports.SkipTurnMessage = SkipTurnMessage;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TieMessage = void 0;\nvar game_message_1 = require(\"./game-message\");\nvar TieMessage = /** @class */ (function (_super) {\n    __extends(TieMessage, _super);\n    /**\n     * @param {boolean} tie - Optional boolean parameter to determine if tie. True by default.\n     */\n    function TieMessage(tie) {\n        if (tie === void 0) { tie = true; }\n        var _this = _super.call(this) || this;\n        _this.tie = tie;\n        return _this;\n    }\n    return TieMessage;\n}(game_message_1.GameMessage));\nexports.TieMessage = TieMessage;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WinnerMessage = void 0;\nvar game_message_1 = require(\"./game-message\");\n/**\n * @class WinnerMessage model\n */\nvar WinnerMessage = /** @class */ (function (_super) {\n    __extends(WinnerMessage, _super);\n    /**\n     * @param {Coin} winner - The coin color of the winner\n     */\n    function WinnerMessage(winner) {\n        var _this = _super.call(this) || this;\n        _this.winner = winner;\n        return _this;\n    }\n    return WinnerMessage;\n}(game_message_1.GameMessage));\nexports.WinnerMessage = WinnerMessage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.switchTurn = exports.randomiseColor = void 0;\nvar coin_1 = require(\"./enums/coin\");\n/**\n * Randomises color\n * @returns {Coin} Random coin color\n */\nfunction randomiseColor() {\n    return Math.floor(Math.random() * 2) + 1;\n}\nexports.randomiseColor = randomiseColor;\n/**\n * Switches turn depending on input\n * @param {Coin} currentTurn - The current coin color\n * @returns {Coin} The opposing coin color\n */\nfunction switchTurn(currentTurn) {\n    return currentTurn === coin_1.Coin.Red ? coin_1.Coin.Green : coin_1.Coin.Red;\n}\nexports.switchTurn = switchTurn;\n","import { BoardDimensions, PlayerInfo, PlayerStats } from \"@danieldesira/daniels-connect4-common\";\r\nimport config from \"./config\";\r\nimport { AuthenticationModel } from \"./models/authentication-model\";\r\nimport Dialog from \"./dialog/dialog\";\r\nimport { DialogIds } from \"./enums/dialog-ids\";\r\n\r\ndeclare global {\r\n    interface Window {\r\n        google: any;\r\n    }\r\n}\r\n\r\nexport async function handleGoogleSignon(response: any) {\r\n    const {credential} = response;\r\n    storeGoogleToken(credential);\r\n    await showLoginLogout();\r\n}\r\n\r\nfunction storeGoogleToken(token: string) {\r\n    const data = {\r\n        token,\r\n        service: 'google'\r\n    } as AuthenticationModel;\r\n    localStorage.setItem('auth', JSON.stringify(data));\r\n}\r\n\r\nexport async function showLoginLogout() {\r\n    const loginBtns = document.getElementById('login-btns') as HTMLDivElement;\r\n    const loggedInArea = document.getElementById('authPlayerArea') as HTMLDivElement;\r\n    if (localStorage.getItem('auth')) {\r\n        loginBtns.classList.add('hide');\r\n        loggedInArea.classList.remove('hide');\r\n        await loadUserData();\r\n    } else {\r\n        loginBtns.classList.remove('hide');\r\n        loggedInArea.classList.add('hide');\r\n    }\r\n}\r\n\r\nexport function logout() {\r\n    localStorage.removeItem('auth');\r\n    showLoginLogout();\r\n}\r\n\r\nexport function getToken(): AuthenticationModel | null {\r\n    const val = localStorage.getItem('auth');\r\n    return val ? JSON.parse(val) as AuthenticationModel : null;\r\n}\r\n\r\nasync function loadUserData() {\r\n    const auth = getToken();\r\n    const response = await fetch(`${config.httpServer}/auth?token=${auth.token}&service=${auth.service}`);\r\n    if (response.status === 200) {\r\n        const data = await response.json() as PlayerInfo;\r\n        const userName = document.getElementById('authPlayerName') as HTMLButtonElement;\r\n        userName.innerText = data.user;\r\n        const authPlayerPicture = document.getElementById('authPlayerPicture') as HTMLImageElement;\r\n        authPlayerPicture.src = data.picUrl;\r\n        const dimensionOption = document.querySelector(`#dimensions option[value='${data.dimensions}']`) as HTMLOptionElement;\r\n        dimensionOption.ariaSelected = 'true';\r\n        dimensionOption.selected = true;\r\n    } else {\r\n        logout();\r\n    }\r\n}\r\n\r\nexport async function loadStats() {\r\n    const auth = getToken();\r\n    const response = await fetch(`${config.httpServer}/stats?token=${auth.token}&service=${auth.service}`);\r\n    if (response.status === 200) {\r\n        const data = await response.json() as PlayerStats;\r\n        Dialog.notify({\r\n            id: DialogIds.PlayerStats,\r\n            title: 'Stats',\r\n            text: [\r\n                    `Wins: ${data.wins} - ${data.winPercent.toFixed(2)}%`,\r\n                    `Losses: ${data.losses} - ${data.lossPercent.toFixed(2)}%`\r\n                ]\r\n        });\r\n    }\r\n}\r\n\r\nexport function initGoogleSSO() {\r\n    window.google.accounts.id.initialize({\r\n        client_id: '966331594657-sjtp3m7ooigjma726j7aa4kcf5qdu2v7.apps.googleusercontent.com',\r\n        callback: handleGoogleSignon\r\n    });\r\n    window.google.accounts.id.prompt();\r\n}\r\n\r\nexport async function updatePlayerDimensions(dimensions: BoardDimensions) {\r\n    const {token, service} = getToken();\r\n    const params = {\r\n        token,\r\n        service,\r\n        dimensions\r\n    };\r\n    const response = await fetch(`${config.httpServer}/update-dimensions`, {\r\n        method: 'post',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(params)\r\n    });\r\n    if (response.status === 200) {\r\n        Dialog.notify({\r\n            title: 'Dimensions',\r\n            text: ['Dimensions updated successfully!'],\r\n            id: DialogIds.Saved\r\n        });\r\n    }\r\n}","import Utils from \"./utils\";\r\n\r\nconst config = Utils.isLocal() ? {\r\n    httpServer: 'http://localhost:3000',\r\n    wsServer: 'ws://localhost:3000'\r\n} : {\r\n    httpServer: 'https://daniels-connect4-server.adaptable.app',\r\n    wsServer: 'wss://daniels-connect4-server.adaptable.app'\r\n};\r\n\r\nexport default config;","import ConfirmationDialogOptions from \"./confirmation-dialog-options\";\r\nimport DialogOptions from \"./dialog-options\";\r\nimport { DialogType } from \"./enums/dialog-type\";\r\nimport PromptDialogOptions from \"./prompt-dialog-options\";\r\nimport PromptInput, { PromptSelect } from \"./prompt-input\";\r\n\r\nexport default class Dialog {\r\n    \r\n    private static modal(type: DialogType, options: DialogOptions) {\r\n        if (!document.getElementById(options.id)) {\r\n            const modal = document.createElement('div') as HTMLDivElement;\r\n            modal.tabIndex = 1;\r\n            modal.id = options.id;\r\n            modal.classList.add('dialog');\r\n\r\n            if (options.title) {\r\n                const h1 = document.createElement('h1') as HTMLHeadingElement;\r\n                h1.innerText = options.title;\r\n                h1.classList.add('dialog-title');\r\n                modal.appendChild(h1);\r\n                modal.appendChild(document.createElement('hr'));\r\n            }\r\n\r\n            const textContainer = document.createElement('div') as HTMLDivElement;\r\n            this.appendText(options.text, textContainer);\r\n            modal.appendChild(textContainer);\r\n\r\n            switch (type) {\r\n                case DialogType.Confirmation: {\r\n                    const o = options as ConfirmationDialogOptions;\r\n                    const btnContainer = document.createElement('div') as HTMLDivElement;\r\n                    btnContainer.classList.add('dialog-btn-container');\r\n                    modal.appendChild(btnContainer);\r\n\r\n                    this.appendBtn(btnContainer, 'Yes', () => {\r\n                        o.yesCallback();\r\n                        this.closeModal(modal);\r\n                    }, o.yesColor, 'button');\r\n                    this.appendBtn(btnContainer, 'No', () => {\r\n                        o.noCallback();\r\n                        this.closeModal(modal);\r\n                    }, o.noColor, 'button');\r\n                    break;\r\n                }\r\n                case DialogType.Notification: {\r\n                    const btnContainer = document.createElement('div') as HTMLDivElement;\r\n                    btnContainer.classList.add('dialog-btn-container');\r\n                    modal.appendChild(btnContainer);\r\n\r\n                    this.appendBtn(btnContainer, 'OK', () => {\r\n                        this.closeModal(modal);\r\n                    }, 'green', 'button');\r\n\r\n                    modal.addEventListener('keydown', (event: KeyboardEvent) => {\r\n                        if (event.key === 'Escape' || event.key === 'Enter') {\r\n                            this.closeModal(modal);\r\n                        }\r\n                    });\r\n\r\n                    break;\r\n                }\r\n                case DialogType.Prompt: {\r\n                    const o = options as PromptDialogOptions;\r\n                    this.appendForm(modal, o);\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            document.body.appendChild(modal);\r\n        }\r\n    }\r\n\r\n    private static appendBtn(container: HTMLDivElement | HTMLFormElement,\r\n                text: string,\r\n                callback: any,\r\n                bgColor: string,\r\n                btnType: 'submit' | 'button' | 'reset') {\r\n        const btn = document.createElement('button') as HTMLButtonElement;\r\n        btn.type = btnType;\r\n        btn.innerText = text;\r\n        btn.classList.add('text');\r\n        btn.classList.add('dialog-btn');\r\n        btn.classList.add(`dialog-btn-${bgColor}`);\r\n        if (btnType === 'button') {\r\n            btn.addEventListener('click', callback);\r\n        }\r\n        container.appendChild(btn);\r\n    }\r\n\r\n    private static appendForm(modal: HTMLDivElement, options: PromptDialogOptions) {\r\n        const inputContainer = document.createElement('div') as HTMLDivElement;\r\n        inputContainer.classList.add('dialog-input-container');\r\n        modal.appendChild(inputContainer);\r\n\r\n        const form = document.createElement('form') as HTMLFormElement;\r\n        inputContainer.appendChild(form);\r\n        form.addEventListener('submit', (event: SubmitEvent) => {\r\n            event.preventDefault();\r\n            options.onOK();\r\n            this.closeModal(modal);\r\n        });\r\n\r\n        this.appendInputs(form, options.inputs);\r\n        this.appendSelects(form, options.selects);\r\n\r\n        const btnContainer = document.createElement('div') as HTMLDivElement;\r\n        btnContainer.classList.add('dialog-btn-container');\r\n        form.appendChild(btnContainer);\r\n\r\n        this.appendBtn(btnContainer, 'OK', null, 'green', 'submit');\r\n        this.appendBtn(btnContainer, 'Cancel', () => {\r\n            options.onCancel();\r\n            this.closeModal(modal);\r\n        }, 'red', 'button');\r\n    }\r\n\r\n    private static appendInputs(form: HTMLFormElement, inputs: Array<PromptInput>) {\r\n        for (let i: number = 0; i < inputs.length; i++) {\r\n            const input = document.createElement('input');\r\n            input.type = inputs[i].type;\r\n            input.id = `dialog-input-${inputs[i].name}`;\r\n            input.name = `dialog-input-${inputs[i].name}`;\r\n            input.ariaPlaceholder = `Enter ${inputs[i].label}`;\r\n            input.placeholder = `Enter ${inputs[i].label}`;\r\n            input.maxLength = inputs[i].limit;\r\n            input.classList.add('dialog-input');\r\n            input.classList.add('text');\r\n            input.required = inputs[i].required;\r\n            input.ariaRequired = inputs[i].required.toString();\r\n            form.appendChild(input);\r\n\r\n            this.appendBrElement(form);\r\n            this.appendBrElement(form);\r\n        }\r\n    }\r\n\r\n    private static appendSelects(form: HTMLFormElement, selects: Array<PromptSelect>) {\r\n        for (let i: number = 0; i < selects.length; i++) {\r\n            const select = document.createElement('select');\r\n            select.name = selects[i].name;\r\n            select.ariaPlaceholder = selects[i].label;\r\n            select.classList.add('select');\r\n            select.required = selects[i].required;\r\n            select.ariaRequired = selects[i].required.toString();\r\n            form.appendChild(select);\r\n\r\n            for (let j = 0; j < selects[i].options.length; j++) {\r\n                const option = document.createElement('option');\r\n                option.innerText = selects[i].options[j].text;\r\n                option.value = selects[i].options[j].value;\r\n                if (selects[i].default === parseInt(selects[i].options[j].value)) {\r\n                    option.selected = true;\r\n                    option.ariaSelected = \"true\";\r\n                }\r\n                select.appendChild(option);\r\n            }\r\n\r\n            this.appendBrElement(form);\r\n            this.appendBrElement(form);\r\n        }\r\n    }\r\n\r\n    private static appendBrElement(container: HTMLDivElement | HTMLFormElement) {\r\n        const br = document.createElement('br') as HTMLBRElement;\r\n        container.appendChild(br);\r\n    }\r\n\r\n    private static appendText(text: Array<string>, container: HTMLDivElement) {\r\n        container.classList.add('text');\r\n        container.classList.add('dialog-text');\r\n        for (let i: number = 0; i < text.length; i++) {\r\n            const p = document.createElement('p') as HTMLParagraphElement;\r\n            p.innerText = text[i];\r\n            container.appendChild(p);\r\n        }\r\n    }\r\n\r\n    private static closeModal(modal: HTMLDivElement) {\r\n        if (document.body.contains(modal)) {\r\n            document.body.removeChild(modal);\r\n        }\r\n    }\r\n\r\n    public static confirm(options: ConfirmationDialogOptions) {\r\n        Dialog.modal(DialogType.Confirmation, options);\r\n    }\r\n\r\n    public static notify(options: DialogOptions) {\r\n        Dialog.modal(DialogType.Notification, options);\r\n    }\r\n\r\n    public static prompt(options: PromptDialogOptions) {\r\n        Dialog.modal(DialogType.Prompt, options);\r\n    }\r\n\r\n    public static closeAllOpenDialogs() {\r\n        const dialogs = document.getElementsByClassName('dialog') as HTMLCollectionOf<HTMLDivElement>;\r\n        for (let i: number = 0; i < dialogs.length; i++) {\r\n            this.closeModal(dialogs[i]);\r\n        }\r\n    }\r\n\r\n}","export enum DialogType {\r\n    Confirmation = 0,\r\n    Notification = 1,\r\n    Prompt = 2\r\n}","export enum DialogIds {\r\n    PlayerNames = 'player-input-dialog',\r\n    ServerError = 'server-error-dialog',\r\n    Instructions = 'instructions-dialog',\r\n    GameEnd = 'game-end-dialog',\r\n    ExitGame = 'exit-game-dialog',\r\n    ContinueGame = 'continue-game-dialog',\r\n    Saved = 'saved-notification-dialog',\r\n    PlayerStats = 'player-stats-dialog',\r\n    Settings = 'settings-dialog',\r\n}","export enum GameMode {\r\n    SamePC = 1,\r\n    Network = 2\r\n}","export enum Sound {\r\n    LandCoin = './sounds/land-coin.m4a',\r\n    Win = './sounds/win.m4a',\r\n    Lose = './sounds/lose.m4a'\r\n}","import Position from './position';\r\nimport PlayerNameSection from './player-name-section';\r\nimport GameOptions from './game-options';\r\nimport BoardLogic, { Coin, switchTurn } from '@danieldesira/daniels-connect4-common';\r\n\r\nexport default abstract class Game {\r\n\r\n    private canvas: HTMLCanvasElement;\r\n    protected context: CanvasRenderingContext2D;\r\n    protected board: BoardLogic;\r\n\r\n    private exitBtn: HTMLButtonElement;\r\n    protected playerNameSection: PlayerNameSection;\r\n    private gameIndicatorsContainer: HTMLDivElement;\r\n    private gameMenu: HTMLDivElement;\r\n\r\n    protected turn: Coin = Coin.Red;\r\n\r\n    private coinRadius: number;\r\n    private rowGap: number;\r\n    private colGap: number;\r\n    private colOffset: number;\r\n    private static verticalOffset: number = 70;\r\n\r\n    protected currentCoinColumn: number = 4;\r\n    protected static moveLeftKeys: Array<string> = ['a', 'A', 'ArrowLeft'];\r\n    protected static moveRightKeys: Array<string> = ['d', 'D', 'ArrowRight'];\r\n\r\n    protected constructor(options: GameOptions) {\r\n        this.canvas = document.getElementById(options.canvasId) as HTMLCanvasElement;\r\n        this.context = this.canvas.getContext('2d');\r\n\r\n        if (options.exitBtnId) {\r\n            this.exitBtn = document.getElementById(options.exitBtnId) as HTMLButtonElement;\r\n        }\r\n\r\n        if (options.playerRedId && options.playerGreenId) {\r\n            this.playerNameSection = new PlayerNameSection(options.playerRedId, options.playerGreenId);\r\n        }\r\n\r\n        if (options.gameIndicatorsId) {\r\n            this.gameIndicatorsContainer = document.getElementById(options.gameIndicatorsId) as HTMLDivElement;\r\n        }\r\n\r\n        if (options.menuId) {\r\n            this.gameMenu = document.getElementById(options.menuId) as HTMLDivElement;\r\n        }\r\n    }\r\n\r\n    protected start() {\r\n        this.showGame();\r\n\r\n        if (this.playerNameSection) {\r\n            this.playerNameSection.initPlayerNames();\r\n            this.playerNameSection.indicateTurn(this.turn);\r\n        }\r\n\r\n        this.resizeCanvas();\r\n        this.setGameEvents();\r\n    }\r\n\r\n    private paintBoard() {\r\n        const boardGradient = this.context.createLinearGradient(0, 0, this.canvas.width, 0);\r\n        boardGradient.addColorStop(0, 'blue');\r\n        boardGradient.addColorStop(1, 'aqua');\r\n        this.context.fillStyle = boardGradient;\r\n        this.context.fillRect(0, Game.verticalOffset, this.canvas.width, this.canvas.height);\r\n\r\n        for (let col = this.board.getColumns() - 1; col >= 0; col--) {\r\n            for (let row = this.board.getRows() - 1; row >= 0; row--) {\r\n                this.context.fillStyle = Game.getColor(this.board.getBoard()[col][row]);\r\n                this.drawCoin(col, row);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected setGameEvents() {\r\n        this.canvas.addEventListener('mousemove', this.canvasMousemove, false);\r\n        this.canvas.addEventListener('click', this.canvasClick, false);\r\n        window.addEventListener('beforeunload', this.beforeUnload);\r\n        window.addEventListener('resize', this.resizeCanvas);\r\n        this.exitBtn.addEventListener('click', this.exit);\r\n        document.body.addEventListener('keydown', this.handleKeyDown);\r\n        this.canvas.addEventListener('touchmove', this.canvasTouchmove);\r\n    }\r\n\r\n    protected abstract canvasMousemove(event: MouseEvent): void;\r\n    protected abstract canvasClick(event: MouseEvent): void;\r\n    protected abstract handleKeyDown(event: KeyboardEvent): void;\r\n    protected abstract canvasTouchmove(event: TouchEvent): void;\r\n\r\n    protected getColumnFromCursorPosition(event: MouseEvent | Touch): number {\r\n        const position = Position.getCursorPosition(event, this.canvas);\r\n        const column = Math.round((position.x - this.colOffset) / this.colGap);\r\n        return column;\r\n    }\r\n\r\n    protected switchTurn() {\r\n        this.turn = switchTurn(this.turn);\r\n\r\n        if (this.playerNameSection) {\r\n            this.playerNameSection.indicateTurn(this.turn);\r\n        }\r\n    }\r\n\r\n    protected moveCoin() {\r\n        this.clearUpper();\r\n        this.context.fillStyle = Game.getColor(this.turn);\r\n        this.paintCoinToDrop(this.currentCoinColumn);\r\n    }\r\n\r\n    protected landCoin(): number {\r\n        if (this.board.getBoard()[this.currentCoinColumn][0] === Coin.Empty) {\r\n            const row = this.board.putCoin(this.turn, this.currentCoinColumn);\r\n            \r\n            this.context.fillStyle = Game.getColor(this.turn);\r\n            this.drawCoin(this.currentCoinColumn, row);\r\n\r\n            return row;\r\n        } else {\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    protected abstract showWinDialog(winner: string, currentTurn: Coin);\r\n\r\n    protected closeGameAfterWinning() {\r\n        this.cleanUpEvents();\r\n\r\n        if (this.exitBtn) {\r\n            this.exitBtn.classList.add('hide');\r\n        }\r\n        \r\n        setTimeout(() => {\r\n            this.resetValues();\r\n            this.hideGame();\r\n\r\n            if (this.playerNameSection) {\r\n                this.playerNameSection.clear();\r\n            }\r\n        }, 3000);\r\n    }\r\n\r\n    protected paintCoinToDrop(column: number) {\r\n        this.context.beginPath();\r\n        this.context.arc(this.colOffset + column * this.colGap, this.coinRadius, this.coinRadius, 0, 2 * Math.PI);\r\n        this.context.closePath();\r\n        this.context.fill();\r\n    }\r\n\r\n    protected abstract beforeUnload(event: Event);\r\n\r\n    private clearUpper() {\r\n        this.context.clearRect(0, 0, this.canvas.width, Game.verticalOffset);\r\n    }\r\n\r\n    protected cleanUpEvents() {\r\n        this.canvas.removeEventListener('mousemove', this.canvasMousemove, false);\r\n        this.canvas.removeEventListener('click', this.canvasClick, false);\r\n        window.removeEventListener('beforeunload', this.beforeUnload);\r\n        window.removeEventListener('resize', this.resizeCanvas);\r\n        this.exitBtn.removeEventListener('click', this.exit);\r\n        document.body.removeEventListener('keydown', this.handleKeyDown);\r\n        this.canvas.removeEventListener('touchmove', this.canvasTouchmove);\r\n    }\r\n\r\n    protected exit() {\r\n        this.cleanUpEvents();\r\n        this.hideGame();\r\n        this.resetValues();\r\n\r\n        if (this.playerNameSection) {\r\n            this.playerNameSection.clear();\r\n        }\r\n    }\r\n\r\n    private resizeCanvas = () => {\r\n        const topHeight = 100;\r\n\r\n        this.canvas.height = window.innerHeight - topHeight;\r\n        this.canvas.width = window.innerWidth;\r\n\r\n        if (this.canvas.width < 1000) {\r\n            this.coinRadius = 20; // Mobile/tablet\r\n        } else {\r\n            this.coinRadius = 30; // Desktop\r\n        }\r\n\r\n        this.colGap = this.canvas.width / this.board.getColumns();\r\n        this.rowGap = (this.canvas.height - topHeight) / this.board.getRows();\r\n\r\n        this.colOffset = this.colGap / 2;\r\n\r\n        this.paintBoard();\r\n    };\r\n\r\n    protected resetValues() {\r\n        this.turn = Coin.Red;\r\n        this.board.resetBoard();\r\n        \r\n        if (this.playerNameSection) {\r\n            this.playerNameSection.reset();\r\n        }\r\n    }\r\n\r\n    private drawCoin(column: number, row: number) {\r\n        this.context.beginPath();\r\n        this.context.arc(this.colOffset + column * this.colGap, Game.verticalOffset * 2 + row * this.rowGap, this.coinRadius, 0, Math.PI * 2);\r\n        this.context.closePath();\r\n        this.context.fill();\r\n    }\r\n\r\n    protected areBothPlayersConnected(): boolean {\r\n        return this.playerNameSection && this.playerNameSection.areBothPlayersConnected();\r\n    }\r\n\r\n    private showGame() {\r\n        this.canvas.classList.remove('hide');\r\n        this.exitBtn.classList.remove('hide');\r\n        this.gameIndicatorsContainer.classList.remove('hide');\r\n        this.gameMenu.classList.add('hide');\r\n    }\r\n\r\n    private hideGame() {\r\n        this.canvas.classList.add('hide');\r\n        this.exitBtn.classList.add('hide');\r\n        this.gameIndicatorsContainer.classList.add('hide');\r\n        this.gameMenu.classList.remove('hide');\r\n    }\r\n\r\n    protected static getColor(color: Coin): string {\r\n        let value: string = '';\r\n        switch (color) {\r\n            case Coin.Empty:\r\n                value = 'lightyellow';\r\n                break;\r\n            case Coin.Red:\r\n                value = 'red';\r\n                break;\r\n            case Coin.Green:\r\n                value = 'greenyellow';\r\n                break;\r\n        }\r\n        return value;\r\n    }\r\n\r\n}","import { Coin } from \"@danieldesira/daniels-connect4-common/lib/enums/coin\";\r\nimport Dialog from \"./dialog/dialog\";\r\nimport { Sound } from \"./enums/sound\";\r\nimport Game from \"./game\";\r\nimport GameOptions from \"./game-options\";\r\nimport Socket from \"./socket\";\r\nimport Utils from \"./utils\";\r\nimport { ActionMessage, BoardDimensions, CurrentTurnMessage, ErrorMessage, GameMessage, InitialMessage, SkipTurnMessage, WinnerMessage, skipTurnMaxWait } from \"@danieldesira/daniels-connect4-common\";\r\nimport { DialogIds } from \"./enums/dialog-ids\";\r\nimport { getToken } from \"./authentication\";\r\nimport { AuthenticationModel } from \"./models/authentication-model\";\r\nimport { BoardLogic } from \"@danieldesira/daniels-connect4-common/lib/board-logic\";\r\n\r\nexport default class NetworkGame extends Game {\r\n\r\n    private static instance: NetworkGame;\r\n\r\n    private socket: Socket;\r\n    private turnCountDown: number;\r\n    private turnCountDownInterval: number;\r\n    private countdownSpan: HTMLSpanElement;\r\n    private logoutBtn: HTMLButtonElement;\r\n\r\n    private constructor(options: GameOptions) {\r\n        super(options);\r\n\r\n        if (options.timerCountdownId) {\r\n            this.countdownSpan = document.getElementById(options.timerCountdownId) as HTMLSpanElement;\r\n        }\r\n\r\n        this.logoutBtn = document.getElementById(options.logoutBtnId) as HTMLButtonElement;\r\n    }\r\n\r\n    public static getInstance(options: GameOptions): NetworkGame {\r\n        if (!NetworkGame.instance) {\r\n            NetworkGame.instance = new NetworkGame(options);\r\n        }\r\n        return NetworkGame.instance;\r\n    }\r\n\r\n    public start(dimensions: BoardDimensions = BoardDimensions.Large) {\r\n        this.board = new BoardLogic(dimensions);\r\n        const auth = getToken();\r\n        if (auth) {\r\n            this.defineSocket(auth);\r\n            this.startCountdown();\r\n            super.start();\r\n            document.body.classList.add('waiting');\r\n            this.disableLogoutBtn();\r\n        } else {\r\n            Dialog.notify({\r\n                title: 'Error',\r\n                text: ['User not logged in!'],\r\n                id: DialogIds.ServerError\r\n            });\r\n        }\r\n    }\r\n\r\n    private defineSocket(auth: AuthenticationModel) {\r\n        this.socket = new Socket(auth);\r\n        this.socket.onMessageCallback = this.onSocketMessage;\r\n        this.socket.onErrorCallback = this.onSocketError;\r\n        this.socket.onGameCancel = this.confirmExit;\r\n    }\r\n\r\n    private onSocketMessage = (messageData: GameMessage) => {\r\n        if (GameMessage.isInitialMessage(messageData)) {\r\n            const data = messageData as InitialMessage;\r\n            if (this.socket && this.playerNameSection) {\r\n                if (data.opponentName) {\r\n                    this.toggleWaitingClass();\r\n                    if (this.socket.getPlayerColor() === Coin.Red) {\r\n                        this.playerNameSection.setPlayerGreen(data.opponentName);\r\n                    } else if (this.socket.getPlayerColor() === Coin.Green) {\r\n                        this.playerNameSection.setPlayerRed(data.opponentName);\r\n                    }\r\n                }\r\n    \r\n                if (data.playerName) {\r\n                    if (this.socket.getPlayerColor() === Coin.Red) {\r\n                        this.playerNameSection.setPlayerRed(data.playerName);\r\n                    } else if (this.socket.getPlayerColor() === Coin.Green) {\r\n                        this.playerNameSection.setPlayerGreen(data.playerName);\r\n                    }\r\n                }\r\n        \r\n                if (data.color) {\r\n                    if (data.color === Coin.Red) {\r\n                        this.playerNameSection.setPlayerRed(this.socket.getPlayerName());\r\n                    } else {\r\n                        this.playerNameSection.setPlayerGreen(this.socket.getPlayerName());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        if (GameMessage.isActionMessage(messageData)) {\r\n            const data = messageData as ActionMessage;\r\n            if (data.action === 'mousemove') {\r\n                this.currentCoinColumn = data.column;\r\n                this.moveCoin();\r\n            }\r\n    \r\n            if (data.action === 'click') {\r\n                this.turn = data.color;\r\n                this.currentCoinColumn = data.column;\r\n                this.landCoin();\r\n            }\r\n        }\r\n        \r\n        if (GameMessage.isSkipTurnMessage(messageData)) {\r\n            const data = messageData as SkipTurnMessage;\r\n            if (data.skipTurn && data.currentTurn) {\r\n                this.turn = data.currentTurn;\r\n                this.turnCountDown = skipTurnMaxWait;\r\n                this.toggleWaitingClass();\r\n            }\r\n        }\r\n\r\n        if (GameMessage.isWinnerMessage(messageData)) {\r\n            const data = messageData as WinnerMessage;\r\n            let winner: string = null;\r\n            if (this.playerNameSection) {\r\n                if (data.winner === Coin.Red) {\r\n                    winner = `${this.playerNameSection.getPlayerRed()} (Red)`;\r\n                } else {\r\n                    winner = `${this.playerNameSection.getPlayerGreen()} (Green)`;\r\n                }\r\n            }\r\n            this.showWinDialog(winner, data.winner);\r\n\r\n            this.closeGameAfterWinning();\r\n            document.body.classList.remove('waiting');\r\n            this.enableLogoutBtn();\r\n        }\r\n\r\n        if (GameMessage.isTieMessage(messageData)) {\r\n            Dialog.notify({\r\n                id: DialogIds.GameEnd,\r\n                text: ['Game resulted in tie!'],\r\n                title: null\r\n            });\r\n            document.body.classList.remove('waiting');\r\n            this.enableLogoutBtn();\r\n            this.closeGameAfterWinning();\r\n        }\r\n\r\n        if (GameMessage.isCurrentTurnMessage(messageData)) {\r\n            const data = messageData as CurrentTurnMessage;\r\n            this.turn = data.currentTurn;\r\n            this.toggleWaitingClass();\r\n            if (this.playerNameSection) {\r\n                this.playerNameSection.indicateTurn(this.turn);\r\n            }\r\n        }\r\n\r\n        if (GameMessage.isDisconnectMessage(messageData)) {\r\n            Dialog.notify({\r\n                id: DialogIds.GameEnd,\r\n                text: ['Your opponent disconnected. You win!'],\r\n                title: 'We have a winner!'\r\n            });\r\n            document.body.classList.remove('waiting');\r\n            this.enableLogoutBtn();\r\n            this.closeGameAfterWinning();\r\n        }\r\n\r\n        if (GameMessage.isErrorMessage(messageData)) {\r\n            const data = messageData as ErrorMessage;\r\n            Dialog.closeAllOpenDialogs();\r\n            Dialog.notify({\r\n                id: DialogIds.ServerError,\r\n                text: [data.error],\r\n                title: 'Error'\r\n            });\r\n            document.body.classList.remove('waiting');\r\n            this.enableLogoutBtn();\r\n            this.closeGameAfterWinning();\r\n        }\r\n    };\r\n\r\n    private onSocketError = () => {\r\n        super.exit();\r\n        this.enableLogoutBtn();\r\n    };\r\n\r\n    protected resetValues() {\r\n        super.resetValues();\r\n        this.stopCountdown();\r\n\r\n        if (this.socket) {\r\n            this.socket.close();\r\n        }\r\n    }\r\n\r\n    protected canvasMousemove = (event: MouseEvent) => {\r\n        if (this.socket && this.turn === this.socket.getPlayerColor() && this.areBothPlayersConnected()) {\r\n            this.currentCoinColumn = this.getColumnFromCursorPosition(event);\r\n            this.moveCoin();\r\n\r\n            const data = new ActionMessage(this.currentCoinColumn, 'mousemove', this.turn);\r\n            this.socket.send(data);\r\n        }\r\n    };\r\n\r\n    protected canvasClick = (event: MouseEvent) => {\r\n        if (this.socket && this.turn === this.socket.getPlayerColor() && this.areBothPlayersConnected()) {\r\n            this.currentCoinColumn = this.getColumnFromCursorPosition(event);\r\n\r\n            const data = new ActionMessage(this.currentCoinColumn, 'click', this.turn);\r\n            this.socket.send(data);\r\n            \r\n            this.landCoin();\r\n        }\r\n    };\r\n\r\n    protected canvasTouchmove = (event: TouchEvent) => {\r\n        if (this.socket && this.turn === this.socket.getPlayerColor() && this.areBothPlayersConnected()) {\r\n            const firstTouch = event.changedTouches[0];\r\n            this.currentCoinColumn = this.getColumnFromCursorPosition(firstTouch);\r\n            this.moveCoin();\r\n\r\n            const data = new ActionMessage(this.currentCoinColumn, 'mousemove', this.turn);\r\n            this.socket.send(data);\r\n        }\r\n    };\r\n\r\n    protected landCoin(): number {\r\n        if (this.board.getBoard()[this.currentCoinColumn][0] === Coin.Empty) {\r\n            const row = super.landCoin();\r\n            \r\n            // Assume the game is still going on\r\n            this.switchTurn();\r\n            this.context.fillStyle = Game.getColor(this.turn);\r\n            this.paintCoinToDrop(this.currentCoinColumn);\r\n            Utils.playSound(Sound.LandCoin);\r\n            this.toggleWaitingClass();\r\n\r\n            return row;\r\n        } else {\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    private toggleWaitingClass() {\r\n        if (this.socket.getPlayerColor() === this.turn) {\r\n            document.body.classList.remove('waiting');\r\n        } else {\r\n            document.body.classList.add('waiting');\r\n        }\r\n    }\r\n\r\n    public exit = () => {\r\n        Dialog.confirm({\r\n            id: DialogIds.ExitGame,\r\n            title: null,\r\n            text: ['Network game in progress. Are you sure you want to quit?'],\r\n            yesCallback: this.confirmExit,\r\n            noCallback: () => {},\r\n            yesColor: 'red',\r\n            noColor: 'green'\r\n        });\r\n    };\r\n\r\n    private confirmExit = () => {\r\n        if (this.socket) {\r\n            this.socket.close();\r\n        }\r\n        Dialog.closeAllOpenDialogs();\r\n        document.body.classList.remove('waiting');\r\n        this.enableLogoutBtn();\r\n\r\n        super.exit();\r\n    };\r\n\r\n    protected beforeUnload = (event: Event) => {\r\n        // Display default dialog before closing\r\n        event.preventDefault();\r\n        event.returnValue = false; // Required by Chrome\r\n    };\r\n\r\n    protected showWinDialog(winner: string, currentTurn: Coin) {\r\n        const winMsg: Array<string> = [];\r\n        winMsg.push(`${winner} wins!`);\r\n        if (this.socket && this.socket.getPlayerColor() === currentTurn) {\r\n            winMsg.push('You win!');\r\n            Utils.playSound(Sound.Win);\r\n        } else {\r\n            winMsg.push('You lose!');\r\n            Utils.playSound(Sound.Lose);\r\n        }\r\n        Dialog.notify({\r\n            id: DialogIds.GameEnd,\r\n            text: winMsg,\r\n            title: 'Game Ends'\r\n        });\r\n    }\r\n\r\n    protected switchTurn() {\r\n        super.switchTurn();\r\n        this.resetCountdown();\r\n    }\r\n\r\n    private turnCountDownCallback = () => {\r\n        if (this.areBothPlayersConnected()) {\r\n            this.turnCountDown--;\r\n            this.countdownSpan.innerText = this.turnCountDown.toString();\r\n            this.adaptCountDownColor();\r\n        }\r\n    };\r\n\r\n    private adaptCountDownColor() {\r\n        if (this.turnCountDown > skipTurnMaxWait / 2) {\r\n            this.countdownSpan.classList.add('green-text');\r\n            this.countdownSpan.classList.remove('red-text');\r\n        } else {\r\n            this.countdownSpan.classList.remove('green-text');\r\n            this.countdownSpan.classList.add('red-text');\r\n        }\r\n    }\r\n\r\n    private startCountdown() {\r\n        this.turnCountDown = skipTurnMaxWait;\r\n        this.turnCountDownInterval = window.setInterval(this.turnCountDownCallback, 1000);\r\n    }\r\n\r\n    private stopCountdown() {\r\n        clearInterval(this.turnCountDownInterval);\r\n        this.countdownSpan.innerText = '';\r\n    }\r\n\r\n    private resetCountdown() {\r\n        this.turnCountDown = skipTurnMaxWait;\r\n    }\r\n\r\n    protected handleKeyDown = (event: KeyboardEvent) => {\r\n        if (this.socket && this.turn === this.socket.getPlayerColor() && this.areBothPlayersConnected()) {\r\n            let data: GameMessage;\r\n\r\n            if (Game.moveLeftKeys.includes(event.key)) {\r\n                if (this.currentCoinColumn > 0) {\r\n                    this.currentCoinColumn--;\r\n\r\n                    data = new ActionMessage(this.currentCoinColumn, 'mousemove', this.turn);\r\n                    this.socket.send(data);\r\n\r\n                    this.moveCoin();\r\n                }\r\n            }\r\n    \r\n            if (Game.moveRightKeys.includes(event.key)) {\r\n                if (this.currentCoinColumn < this.board.getColumns() - 1) {\r\n                    this.currentCoinColumn++;\r\n\r\n                    data = new ActionMessage(this.currentCoinColumn, 'mousemove', this.turn);\r\n                    this.socket.send(data);\r\n\r\n                    this.moveCoin();\r\n                }\r\n            }\r\n    \r\n            if (event.key === ' ') {\r\n                data = new ActionMessage(this.currentCoinColumn, 'click', this.turn);\r\n                this.socket.send(data);\r\n\r\n                this.landCoin();\r\n            }\r\n        }\r\n\r\n        if (event.key === 'Escape') {\r\n            this.exit();\r\n        }\r\n    };\r\n\r\n    private disableLogoutBtn() {\r\n        this.logoutBtn.disabled = true;\r\n        this.logoutBtn.ariaDisabled = 'true';\r\n    }\r\n\r\n    private enableLogoutBtn() {\r\n        this.logoutBtn.disabled = false;\r\n        this.logoutBtn.ariaDisabled = 'false';\r\n    }\r\n    \r\n}","import { Coin } from \"@danieldesira/daniels-connect4-common\";\r\n\r\nexport default class PlayerNameSection {\r\n    private playerRedSpan: HTMLSpanElement;\r\n    private playerGreenSpan: HTMLSpanElement;\r\n    private playerRed: string;\r\n    private playerGreen: string;\r\n\r\n    public constructor(playerRedId: string, playerGreenId: string) {\r\n        if (playerRedId) {\r\n            this.playerRedSpan = document.getElementById(playerRedId);\r\n        }\r\n\r\n        if (playerGreenId) {\r\n            this.playerGreenSpan = document.getElementById(playerGreenId);\r\n        }\r\n    }\r\n\r\n    public initPlayerNames() {\r\n        const waiting = 'Waiting to connect...';\r\n        if (this.playerGreenSpan && !this.playerGreen) {\r\n            this.playerGreenSpan.innerText = waiting;\r\n        }\r\n        if (this.playerRedSpan && !this.playerRed) {\r\n            this.playerRedSpan.innerText = waiting;\r\n        }\r\n    }\r\n\r\n    public clear() {\r\n        if (this.playerGreenSpan) {\r\n            this.playerGreenSpan.innerText = '';\r\n        }\r\n        if (this.playerRedSpan) {\r\n            this.playerRedSpan.innerText = '';\r\n        }\r\n    }\r\n\r\n    public reset() {\r\n        this.playerRed = null;\r\n        this.playerGreen = null;\r\n    }\r\n\r\n    public getPlayerRed = (): string => this.playerRed;\r\n    public getPlayerGreen = (): string => this.playerGreen;\r\n    public areBothPlayersConnected = (): boolean => !!this.playerRed && !!this.playerGreen;\r\n\r\n    public setPlayerRed(playerName: string) {\r\n        this.playerRed = playerName;\r\n        if (this.playerRedSpan) {\r\n            this.playerRedSpan.innerText = this.playerRed;\r\n        }\r\n    }\r\n\r\n    public setPlayerGreen(playerName: string) {\r\n        this.playerGreen = playerName;\r\n        if (this.playerGreenSpan) {\r\n            this.playerGreenSpan.innerText = this.playerGreen;\r\n        }\r\n    }\r\n\r\n    public indicateTurn(turn: Coin) {\r\n        if (turn === Coin.Red) {\r\n            this.playerRedSpan.classList.add('currentTurn');\r\n            this.playerGreenSpan.classList.remove('currentTurn');\r\n        } else {\r\n            this.playerGreenSpan.classList.add('currentTurn');\r\n            this.playerRedSpan.classList.remove('currentTurn');\r\n        }\r\n    }\r\n\r\n}","export default class Position {\r\n    public x: number;\r\n    public y: number;\r\n\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public static getCursorPosition(event: MouseEvent | Touch, canvas: HTMLCanvasElement): Position {\r\n        let x: number;\r\n        let y: number;\r\n        if (event.pageX !== undefined || event.pageY !== undefined) {\r\n            x = event.pageX;\r\n            y = event.pageY;\r\n        }\r\n        else {\r\n            x = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n            y = event.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n        }\r\n        x -= canvas.offsetLeft;\r\n        y -= canvas.offsetTop;\r\n        return new Position(x, y);\r\n    }\r\n}","import Dialog from \"./dialog/dialog\";\r\nimport Game from \"./game\";\r\nimport GameOptions from \"./game-options\";\r\nimport { Sound } from \"./enums/sound\";\r\nimport Utils from \"./utils\";\r\nimport Timer from \"./timer\";\r\nimport { BoardDimensions, Coin, randomiseColor } from \"@danieldesira/daniels-connect4-common\";\r\nimport { DialogIds } from \"./enums/dialog-ids\";\r\nimport PreviousGameData, { MainGameDataModel } from \"./models/previous-game-data\";\r\nimport { BoardLogic } from \"@danieldesira/daniels-connect4-common/lib/board-logic\";\r\n\r\nexport default class SameDeviceGame extends Game {\r\n\r\n    private static instance: SameDeviceGame;\r\n    private timer: Timer;\r\n    private dimensions: BoardDimensions;\r\n\r\n    private constructor(options: GameOptions) {\r\n        super(options);\r\n\r\n        if (options.timerCountdownId) {\r\n            this.timer = new Timer(options.timerCountdownId);\r\n        }\r\n    }\r\n\r\n    public static getInstance(options: GameOptions): SameDeviceGame {\r\n        if (!SameDeviceGame.instance) {\r\n            SameDeviceGame.instance = new SameDeviceGame(options);\r\n        }\r\n        return SameDeviceGame.instance;\r\n    }\r\n\r\n    private setTimer = () => {\r\n        if (this.timer) {\r\n            this.timer.set();\r\n        }\r\n    }\r\n\r\n    public start(dimensions: BoardDimensions = BoardDimensions.Large) {\r\n        this.dimensions = dimensions;\r\n        this.board = new BoardLogic(dimensions);\r\n        this.checkGameData();\r\n    }\r\n\r\n    private onGameDataCheck() {\r\n        this.setUpPlayerNames();\r\n        \r\n        if (this.areBothPlayersConnected()) {\r\n            this.setTimer();\r\n        }\r\n\r\n        super.start();\r\n    }\r\n\r\n    private setUpPlayerNames() {\r\n        const gameData = JSON.parse(localStorage.getItem('gameData')) as MainGameDataModel;\r\n        const dimensionData = this.getGameDimensionData(gameData);\r\n\r\n        const onPromptOK = () => {\r\n            const redInput = document.getElementById('dialog-input-red') as HTMLInputElement;\r\n            const greenInput = document.getElementById('dialog-input-green') as HTMLInputElement;\r\n            if (redInput.value && greenInput.value && redInput.value.trim()\r\n                    && greenInput.value.trim() && this.playerNameSection) {\r\n                this.playerNameSection.setPlayerRed(redInput.value);\r\n                this.playerNameSection.setPlayerGreen(greenInput.value);\r\n                this.setTimer();\r\n            }\r\n        };\r\n\r\n        if (!dimensionData) {\r\n            Dialog.prompt({\r\n                id: DialogIds.PlayerNames,\r\n                title: 'Input Players',\r\n                text: ['Please enter player names! (10 characters or less.)'],\r\n                onOK: () => onPromptOK(),\r\n                onCancel: this.exit,\r\n                inputs: [\r\n                    {\r\n                        label: 'Player Red',\r\n                        name: 'red',\r\n                        type: 'text',\r\n                        limit: 10,\r\n                        required: true\r\n                    },\r\n                    {\r\n                        label: 'Player Green',\r\n                        name: 'green',\r\n                        type: 'text',\r\n                        limit: 10,\r\n                        required: true\r\n                    }\r\n                ],\r\n                selects: []\r\n            });\r\n        }\r\n    }\r\n\r\n    private checkGameData() {\r\n        const gameData = JSON.parse(localStorage.getItem('gameData')) as MainGameDataModel;\r\n        const dimensionData = this.getGameDimensionData(gameData);\r\n        \r\n        if (dimensionData) {\r\n            Dialog.confirm({\r\n                id: DialogIds.ContinueGame,\r\n                title: null,\r\n                text: ['Do you want to continue playing the previous game?'],\r\n                yesCallback: this.continuePreviousGame,\r\n                noCallback: this.cancelPreviousGame,\r\n                yesColor: 'green',\r\n                noColor: 'red'\r\n            });\r\n        } else {\r\n            this.turn = randomiseColor();\r\n            this.onGameDataCheck();\r\n        }\r\n    }\r\n\r\n    private continuePreviousGame = () => {\r\n        this.restoreLastGame();\r\n        this.onGameDataCheck();\r\n    };\r\n\r\n    private cancelPreviousGame = () => {\r\n        this.clearGameData();\r\n        this.turn = randomiseColor();\r\n        this.onGameDataCheck();\r\n    };\r\n\r\n    private restoreLastGame() {\r\n        const gameData = JSON.parse(localStorage.getItem('gameData')) as MainGameDataModel;\r\n        const dimensionData = this.getGameDimensionData(gameData);\r\n        \r\n        this.turn = dimensionData.nextTurn;\r\n        this.board.setBoard(dimensionData.board);\r\n\r\n        if (this.timer) {\r\n            this.timer.setSecondsRunning(dimensionData.secondsRunning);\r\n        }\r\n\r\n        if (this.playerNameSection) {\r\n            this.playerNameSection.setPlayerGreen(dimensionData.playerGreen);\r\n            this.playerNameSection.setPlayerRed(dimensionData.playerRed);\r\n        }\r\n    }\r\n\r\n    private saveGame() {\r\n        if (this.areBothPlayersConnected()) {\r\n            let gameData = JSON.parse(localStorage.getItem('gameData')) as MainGameDataModel;\r\n            if (!gameData) {\r\n                gameData = {\r\n                    small: null,\r\n                    medium: null,\r\n                    large: null\r\n                };\r\n            }\r\n            const dimensionData: PreviousGameData = {\r\n                nextTurn: this.turn,\r\n                board: this.board.getBoard(),\r\n                secondsRunning: this.timer?.getSecondsRunning(),\r\n                playerRed: this.playerNameSection?.getPlayerRed(),\r\n                playerGreen: this.playerNameSection?.getPlayerGreen()\r\n            };\r\n            switch (this.dimensions) {\r\n                case BoardDimensions.Small:\r\n                    gameData.small = dimensionData;\r\n                    break;\r\n                case BoardDimensions.Medium:\r\n                    gameData.medium = dimensionData;\r\n                    break;\r\n                case BoardDimensions.Large:\r\n                    gameData.large = dimensionData;\r\n                    break;\r\n            }\r\n            localStorage.setItem('gameData', JSON.stringify(gameData));\r\n        }\r\n    }\r\n\r\n    protected canvasMousemove = (event: MouseEvent) => {\r\n        if (this.areBothPlayersConnected()) {\r\n            this.currentCoinColumn = this.getColumnFromCursorPosition(event);\r\n            this.moveCoin();\r\n        }\r\n    };\r\n\r\n    protected canvasClick = (event: MouseEvent) => {\r\n        if (this.areBothPlayersConnected()) {\r\n            this.currentCoinColumn = this.getColumnFromCursorPosition(event);\r\n            this.landCoin();\r\n        }\r\n    };\r\n\r\n    protected canvasTouchmove = (event: TouchEvent) => {\r\n        if (this.areBothPlayersConnected()) {\r\n            const firstTouch = event.changedTouches[0];\r\n            this.currentCoinColumn = this.getColumnFromCursorPosition(firstTouch);\r\n            this.moveCoin();\r\n        }\r\n    };\r\n\r\n    public exit = () => {\r\n        this.saveGame();\r\n        Dialog.closeAllOpenDialogs();\r\n\r\n        if (this.timer) {\r\n            this.timer.stop();\r\n        }\r\n\r\n        super.exit();\r\n    };\r\n\r\n    protected beforeUnload = () => {\r\n        this.saveGame();\r\n    }\r\n\r\n    private pageVisibilityChange = () => {\r\n        if (this.timer) {\r\n            this.timer.pauseWhenDocumentHidden();\r\n        }\r\n    };\r\n\r\n    protected closeGameAfterWinning() {\r\n        this.clearGameData();\r\n\r\n        if (this.timer) {\r\n            this.timer.stop();\r\n        }\r\n\r\n        super.closeGameAfterWinning();\r\n    }\r\n\r\n    protected landCoin(): number {\r\n        if (this.board.getBoard()[this.currentCoinColumn][0] === Coin.Empty) {\r\n            const row = super.landCoin();\r\n            \r\n            const coinCount = this.board.countConsecutiveCoins(this.currentCoinColumn, row, this.turn);\r\n\r\n            if (coinCount >= 4) {\r\n                let winner: string = '';\r\n\r\n                if (this.playerNameSection) {\r\n                    if (this.turn === Coin.Red) {\r\n                        winner = `${this.playerNameSection.getPlayerRed()} (Red)`;\r\n                    } else if (this.turn === Coin.Green) {\r\n                        winner = `${this.playerNameSection.getPlayerGreen()} (Green)`;\r\n                    }\r\n                }\r\n\r\n                this.showWinDialog(winner, this.turn);\r\n                this.closeGameAfterWinning();\r\n            } else if (this.board.isBoardFull()) {\r\n                let message: string = '';\r\n                if (this.playerNameSection) {\r\n                    message += `${this.playerNameSection.getPlayerRed()} (Red) and ${this.playerNameSection.getPlayerGreen()} (Green)`;\r\n                }\r\n                message += ' are tied!';\r\n                Dialog.notify({\r\n                    id: DialogIds.GameEnd,\r\n                    title: 'Tie',\r\n                    text: [message]\r\n                });\r\n                this.closeGameAfterWinning();\r\n            } else { // If game is still going on\r\n                this.switchTurn();\r\n                this.context.fillStyle = Game.getColor(this.turn);\r\n                this.paintCoinToDrop(this.currentCoinColumn);\r\n                Utils.playSound(Sound.LandCoin);\r\n            }\r\n\r\n            return row;\r\n        } else {\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    protected setGameEvents() {\r\n        super.setGameEvents();\r\n        document.addEventListener('visibilitychange', this.pageVisibilityChange);\r\n    }\r\n\r\n    protected cleanUpEvents() {\r\n        super.cleanUpEvents();\r\n        document.removeEventListener('changevisibility', this.pageVisibilityChange);\r\n    }\r\n\r\n    protected showWinDialog(winner: string, _: Coin) {\r\n        const winMsg: Array<string> = new Array();\r\n        winMsg.push(`${winner} wins!`);\r\n        if (this.timer) {\r\n            winMsg.push(`Time taken: ${this.timer.getTimeInStringFormat()}`);\r\n        }\r\n        Utils.playSound(Sound.Win);\r\n        Dialog.notify({\r\n            id: DialogIds.GameEnd,\r\n            text: winMsg,\r\n            title: 'We have a winner!'\r\n        });\r\n    }\r\n\r\n    protected resetValues() {\r\n        super.resetValues();\r\n\r\n        if (this.timer) {\r\n            this.timer.reset();\r\n        }\r\n    }\r\n\r\n    protected handleKeyDown = (event: KeyboardEvent) => {\r\n        if (this.areBothPlayersConnected()) {\r\n            if (Game.moveLeftKeys.includes(event.key)) {\r\n                if (this.currentCoinColumn > 0) {\r\n                    this.currentCoinColumn--;\r\n                    this.moveCoin();\r\n                }\r\n            }\r\n    \r\n            if (Game.moveRightKeys.includes(event.key)) {\r\n                if (this.currentCoinColumn < this.board.getColumns() - 1) {\r\n                    this.currentCoinColumn++;\r\n                    this.moveCoin();\r\n                }\r\n            }\r\n    \r\n            if (event.key === ' ') {\r\n                this.landCoin();\r\n            }\r\n        }\r\n\r\n        if (event.key === 'Escape') {\r\n            this.exit();\r\n        }\r\n    };\r\n\r\n    private clearGameData() {\r\n        const gameData = JSON.parse(localStorage.getItem('gameData')) as MainGameDataModel;\r\n        switch (this.dimensions) {\r\n            case BoardDimensions.Small:\r\n                gameData.small = null;\r\n                break;\r\n            case BoardDimensions.Medium:\r\n                gameData.medium = null;\r\n                break;\r\n            case BoardDimensions.Large:\r\n                gameData.large = null;\r\n                break;\r\n        }\r\n        localStorage.setItem('gameData', JSON.stringify(gameData));\r\n    }\r\n\r\n    private getGameDimensionData(gameData: MainGameDataModel): PreviousGameData | null {\r\n        let dimensionData: PreviousGameData = null;\r\n        if (gameData) {\r\n            switch (this.dimensions) {\r\n                case BoardDimensions.Small:\r\n                    dimensionData = gameData.small;\r\n                    break;\r\n                case BoardDimensions.Medium:\r\n                    dimensionData = gameData.medium;\r\n                    break;\r\n                case BoardDimensions.Large:\r\n                    dimensionData = gameData.large;\r\n                    break;\r\n            }\r\n        }\r\n        return dimensionData;\r\n    }\r\n\r\n}","import { getToken } from \"./authentication\";\r\nimport config from \"./config\";\r\nimport Dialog from \"./dialog/dialog\";\r\nimport { DialogIds } from \"./enums/dialog-ids\";\r\nimport { AuthenticationModel } from \"./models/authentication-model\";\r\nimport { Coin, GameMessage, InitialMessage } from \"@danieldesira/daniels-connect4-common\";\r\n\r\nexport default class Socket {\r\n    private webSocket: WebSocket;\r\n    private playerColor: Coin;\r\n    private playerName: string;\r\n    private gameId: number;\r\n    public onMessageCallback: Function;\r\n    public onErrorCallback: Function;\r\n    public onGameCancel: Function;\r\n\r\n    public constructor(auth: AuthenticationModel) {\r\n        this.connect(auth);\r\n    }\r\n\r\n    private connect(auth: AuthenticationModel) {\r\n        let url: string = `${config.wsServer}?token=${auth.token}&service=${auth.service}`;\r\n\r\n        if (this.playerColor && !isNaN(this.gameId)) {\r\n            url += `&playerColor=${this.playerColor}&gameId=${this.gameId}`;\r\n        }\r\n\r\n        this.webSocket = new WebSocket(url);\r\n\r\n        this.webSocket.onmessage = this.onMessage;\r\n        this.webSocket.onerror = this.onError;\r\n        this.webSocket.onclose = this.onClose;\r\n    }\r\n\r\n    public send = (data: GameMessage) => this.webSocket.send(JSON.stringify(data));\r\n\r\n    public close() {\r\n        this.webSocket.onclose = null;\r\n        this.webSocket.onmessage = null;\r\n        this.webSocket.onerror = null;\r\n        this.webSocket.close();\r\n    }\r\n\r\n    public getPlayerColor = (): Coin => this.playerColor;\r\n    public getPlayerName = (): string => this.playerName;\r\n\r\n    private onMessage = (event: MessageEvent) => {\r\n        const messageData: GameMessage = JSON.parse(event.data);\r\n\r\n        if (GameMessage.isInitialMessage(messageData)) {\r\n            const data = messageData as InitialMessage;\r\n\r\n            if (!this.gameId) {\r\n                this.gameId = data.gameId;\r\n            }\r\n\r\n            if (!this.playerName) {\r\n                this.playerName = data.playerName;\r\n            }\r\n            \r\n            if (!this.playerColor) {\r\n                this.playerColor = data.color;\r\n            }\r\n        }\r\n\r\n        if (this.onMessageCallback) {\r\n            this.onMessageCallback(messageData);\r\n        }\r\n    };\r\n\r\n    private onError = () => {\r\n        this.onErrorCallback();\r\n        Dialog.closeAllOpenDialogs();\r\n        Dialog.notify({\r\n            id: DialogIds.ServerError,\r\n            text: ['Problem connecting to server!'],\r\n            title: 'Error'\r\n        });\r\n\r\n        document.body.classList.remove('waiting');\r\n    };\r\n\r\n    private onClose = () => {\r\n        const auth = getToken();\r\n        if (auth) {\r\n            this.connect(auth);\r\n        }\r\n    };\r\n}","export default class Timer {\r\n\r\n    private secondsRunning: number;\r\n    private interval: number;\r\n    private timerSpan: HTMLSpanElement;\r\n\r\n    public constructor(timerId: string) {\r\n        this.timerSpan = document.getElementById(timerId) as HTMLSpanElement;\r\n        this.secondsRunning = 0;\r\n    }\r\n\r\n    private timerCallback = () => {\r\n        this.secondsRunning++;\r\n        const minutes: number = Math.floor(this.secondsRunning / 60);\r\n        const seconds: number = this.secondsRunning % 60;\r\n        this.timerSpan.innerText = `${minutes}:${(seconds < 10 ? '0' : '')}${seconds}`;\r\n        \r\n        if (this.timerSpan.classList.contains('hide')) {\r\n            clearInterval(this.interval);\r\n        }\r\n    };\r\n\r\n    public set() {\r\n        if (this.timerSpan) {\r\n            this.timerSpan.classList.remove('hide');\r\n            this.interval = window.setInterval(this.timerCallback, 1000);\r\n        }\r\n    }\r\n\r\n    public stop() {\r\n        if (this.interval) {\r\n            clearInterval(this.interval);\r\n            this.timerSpan.innerText = '';\r\n            this.timerSpan.classList.add('hide');\r\n        }\r\n    }\r\n\r\n    public pauseWhenDocumentHidden() {\r\n        if (document.hidden) {\r\n            clearInterval(this.interval);\r\n        } else {\r\n            this.interval = window.setInterval(this.timerCallback, 1000);\r\n        }\r\n    }\r\n\r\n    public getTimeInStringFormat(): string {\r\n        if (this.timerSpan) {\r\n            return this.timerSpan.innerText;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n    \r\n    public setSecondsRunning(secondsRunning: number) {\r\n        this.secondsRunning = secondsRunning;\r\n    }\r\n\r\n    public getSecondsRunning = () => this.secondsRunning;   \r\n\r\n    public reset() {\r\n        this.secondsRunning = 0;\r\n    }\r\n\r\n}","export default class Utils {\r\n    public static isLocal(): boolean {\r\n        return location.protocol === 'file:'\r\n            || location.hostname === 'localhost';\r\n    }\r\n\r\n    public static playSound(path: string) {\r\n        let audio = new Audio(path);\r\n        audio.play();\r\n    }\r\n}","import { BoardDimensions } from \"@danieldesira/daniels-connect4-common\";\r\nimport { initGoogleSSO, loadStats, logout, showLoginLogout, updatePlayerDimensions } from \"./lib/authentication\";\r\nimport Dialog from \"./lib/dialog/dialog\";\r\nimport { DialogIds } from \"./lib/enums/dialog-ids\";\r\nimport { GameMode } from \"./lib/enums/game-mode\";\r\nimport GameOptions from \"./lib/game-options\";\r\nimport NetworkGame from \"./lib/network-game\";\r\nimport SameDeviceGame from \"./lib/same-device-game\";\r\n\r\nconst samePCBtn = document.getElementById('samePC') as HTMLButtonElement;\r\nconst networkBtn = document.getElementById('network') as HTMLButtonElement;\r\nconst instructionsBtn = document.getElementById('instructions') as HTMLButtonElement;\r\n\r\nsamePCBtn.addEventListener('click', () => {\r\n    initGame(GameMode.SamePC);\r\n}, false);\r\n\r\nnetworkBtn.addEventListener('click', () => {\r\n    initGame(GameMode.Network);\r\n}, false);\r\n\r\nfunction initGame(mode: GameMode) {\r\n    try {const dimensionsSelect = document.getElementById('dimensions') as HTMLSelectElement;\r\n        const dimensions = parseInt(dimensionsSelect.options[dimensionsSelect.selectedIndex].value) as BoardDimensions;\r\n\r\n        const options: GameOptions = {\r\n            canvasId: 'board',\r\n            exitBtnId: 'exitBtn',\r\n            timerCountdownId: 'timer',\r\n            playerRedId: 'playerRed',\r\n            playerGreenId: 'playerGreen',\r\n            menuId: 'menu',\r\n            gameIndicatorsId: 'gameIndicators',\r\n            logoutBtnId: 'logout'\r\n        };\r\n        if (mode === GameMode.Network) {\r\n            const connect4 = NetworkGame.getInstance(options);\r\n            connect4.start(dimensions);\r\n        } else {\r\n            const connect4 = SameDeviceGame.getInstance(options);\r\n            connect4.start(dimensions);\r\n        }\r\n    } catch (ex) {\r\n        Dialog.notify({\r\n            id: DialogIds.ServerError,\r\n            title: 'Error',\r\n            text: ['Problem encountered!']\r\n        });\r\n        console.error(ex);\r\n    }\r\n}\r\n\r\ninstructionsBtn.addEventListener('click', () => {\r\n    const text = [\r\n        'The principle behind Connect4 is simple:',\r\n        'The player who first places 4 coins next to each other, wins. You may ' +\r\n            'match horizontally, vertically or diagonally.',\r\n        'Furthermore, in Network Play, you must place your coin within 60 seconds. ' +\r\n            'If you fail to do so, you pass the turn to your opponent.',\r\n        'Further note that exiting in Same Device Play, saves game progress. You ' +\r\n            'will be presented with the option to continue the same game the next ' +\r\n            'time. This does not work for Network Play because your opponent might ' +\r\n            'not be available the next time and you might not even know him/her/them.',\r\n        'Good luck and have fun playing!'\r\n    ];\r\n    Dialog.notify({\r\n        id: DialogIds.Instructions,\r\n        text,\r\n        title: 'Instructions'\r\n    });\r\n}, false);\r\n\r\nconst shareBtn = document.getElementById('shareBtn') as HTMLAnchorElement;\r\nshareBtn.addEventListener('click', (event: MouseEvent) => {\r\n    event.preventDefault();\r\n    if (navigator.canShare) {\r\n        const shareData = {\r\n            url: location.href,\r\n            title: `Daniel's Connect4`\r\n        };\r\n        navigator.share(shareData)\r\n            .catch((err) => console.error(`Problem while sharing: ${err}`));\r\n    } else {\r\n        Dialog.notify({\r\n            id: DialogIds.ServerError,\r\n            title: 'Error',\r\n            text: ['Problem opening share menu!']\r\n        });\r\n    }\r\n});\r\n\r\nconst googleSignonBtn = document.getElementById('googleSignon') as HTMLButtonElement;\r\ngoogleSignonBtn.addEventListener('click', initGoogleSSO);\r\n\r\n(async () => {\r\n    await showLoginLogout();\r\n})();\r\n\r\nconst logoutBtn = document.getElementById('logout') as HTMLButtonElement;\r\nlogoutBtn.addEventListener('click', logout);\r\n\r\nconst statsBtn = document.getElementById('stats') as HTMLButtonElement;\r\nstatsBtn.addEventListener('click', async () => {\r\n    await loadStats();\r\n});\r\n\r\nconst settingsBtn = document.getElementById('settings') as HTMLButtonElement;\r\nsettingsBtn.addEventListener('click', () => {\r\n    Dialog.prompt({\r\n        id: DialogIds.Settings,\r\n        title: 'Settings',\r\n        text: ['Configure as desired'],\r\n        inputs: [],\r\n        selects: [{\r\n            name: 'dimensions',\r\n            label: 'Dimensions',\r\n            required: true,\r\n            options: [\r\n                {\r\n                    text: 'Small (6x5)',\r\n                    value: BoardDimensions.Small.toString()\r\n                },\r\n                {\r\n                    text: 'Medium (7x6)',\r\n                    value: BoardDimensions.Medium.toString()\r\n                },\r\n                {\r\n                    text: 'Large (9x8)',\r\n                    value: BoardDimensions.Large.toString()\r\n                }\r\n            ],\r\n            default: 3\r\n        }],\r\n        onOK: async () => {\r\n            const dimensionsSelect = document.getElementById('dimensions') as HTMLSelectElement;\r\n            const dimensions = parseInt(dimensionsSelect.value) as BoardDimensions;\r\n            await updatePlayerDimensions(dimensions);\r\n        },\r\n        onCancel: null\r\n    });\r\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(519);\n"],"names":["Object","defineProperty","exports","value","BoardLogic","constants_1","coin_1","dimensions_1","dim","_this","this","board","getColumns","columns","getRows","rows","getBoard","resetBoard","initBoard","BoardDimensions","Small","dimensions","small","Medium","medium","Large","large","prototype","Array","col","row","Coin","Empty","countConsecutiveCoins","column","currentTurn","count","coinCount","rowCount","colCount","isBoardFull","full","putCoin","color","setBoard","setBoardItem","coin","skipTurnMaxWait","switchTurn","randomiseColor","WinnerMessage","TieMessage","SkipTurnMessage","InitialMessage","GameMessage","ErrorMessage","DisconnectMessage","CurrentTurnMessage","ActionMessage","board_logic_1","enumerable","get","action_message_1","current_turn_message_1","disconnect_message_1","error_message_1","game_message_1","initial_message_1","skip_turn_message_1","tie_message_1","winner_message_1","player_turn_1","extendStatics","__extends","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","call","TypeError","String","__","constructor","create","_super","action","hardDisconnect","error","isInitialMessage","msg","isNaN","isInactivityMessage","isActionMessage","isSkipTurnMessage","isWinnerMessage","isTieMessage","isCurrentTurnMessage","isDisconnectMessage","isErrorMessage","gameId","playerName","opponentName","skipTurn","tie","winner","Math","floor","random","Red","Green","handleGoogleSignon","response","data","token","service","localStorage","setItem","JSON","stringify","showLoginLogout","loginBtns","document","getElementById","loggedInArea","getItem","classList","add","remove","loadUserData","logout","removeItem","getToken","val","parse","auth","fetch","httpServer","status","json","innerText","user","src","picUrl","dimensionOption","querySelector","ariaSelected","selected","notify","id","DialogIds","PlayerStats","title","text","wins","winPercent","toFixed","losses","lossPercent","window","google","accounts","initialize","client_id","callback","prompt","params","method","headers","body","Saved","config","isLocal","wsServer","modal","type","options","createElement","tabIndex","h1","appendChild","textContainer","appendText","DialogType","Confirmation","btnContainer","appendBtn","yesCallback","closeModal","yesColor","noCallback","noColor","Notification","addEventListener","event","key","Prompt","o","appendForm","container","bgColor","btnType","btn","inputContainer","form","preventDefault","onOK","appendInputs","inputs","appendSelects","selects","onCancel","i","length","input","name","ariaPlaceholder","label","placeholder","maxLength","limit","required","ariaRequired","toString","appendBrElement","select","j","option","default","parseInt","br","contains","removeChild","confirm","Dialog","closeAllOpenDialogs","dialogs","getElementsByClassName","GameMode","Sound","turn","currentCoinColumn","resizeCanvas","canvas","height","innerHeight","width","innerWidth","coinRadius","colGap","rowGap","colOffset","paintBoard","canvasId","context","getContext","exitBtnId","exitBtn","playerRedId","playerGreenId","playerNameSection","gameIndicatorsId","gameIndicatorsContainer","menuId","gameMenu","start","showGame","initPlayerNames","indicateTurn","setGameEvents","boardGradient","createLinearGradient","addColorStop","fillStyle","fillRect","Game","verticalOffset","getColor","drawCoin","canvasMousemove","canvasClick","beforeUnload","exit","handleKeyDown","canvasTouchmove","getColumnFromCursorPosition","position","getCursorPosition","round","x","moveCoin","clearUpper","paintCoinToDrop","landCoin","closeGameAfterWinning","cleanUpEvents","setTimeout","resetValues","hideGame","clear","beginPath","arc","PI","closePath","fill","clearRect","removeEventListener","reset","areBothPlayersConnected","moveLeftKeys","moveRightKeys","onSocketMessage","messageData","socket","toggleWaitingClass","getPlayerColor","setPlayerGreen","setPlayerRed","getPlayerName","turnCountDown","getPlayerRed","getPlayerGreen","showWinDialog","enableLogoutBtn","GameEnd","ServerError","onSocketError","send","firstTouch","changedTouches","ExitGame","confirmExit","close","returnValue","turnCountDownCallback","countdownSpan","adaptCountDownColor","includes","timerCountdownId","logoutBtn","logoutBtnId","getInstance","NetworkGame","instance","defineSocket","startCountdown","disableLogoutBtn","onMessageCallback","onErrorCallback","onGameCancel","stopCountdown","playSound","LandCoin","winMsg","push","Win","Lose","resetCountdown","turnCountDownInterval","setInterval","clearInterval","disabled","ariaDisabled","playerRed","playerGreen","playerRedSpan","playerGreenSpan","waiting","y","undefined","pageX","pageY","clientX","scrollLeft","documentElement","clientY","scrollTop","Position","offsetLeft","offsetTop","setTimer","timer","set","continuePreviousGame","restoreLastGame","onGameDataCheck","cancelPreviousGame","clearGameData","saveGame","stop","pageVisibilityChange","pauseWhenDocumentHidden","SameDeviceGame","checkGameData","setUpPlayerNames","gameData","getGameDimensionData","PlayerNames","redInput","greenInput","trim","ContinueGame","dimensionData","nextTurn","setSecondsRunning","secondsRunning","getSecondsRunning","message","_","getTimeInStringFormat","webSocket","playerColor","onMessage","onError","onClose","connect","url","WebSocket","onmessage","onerror","onclose","timerId","timerCallback","minutes","seconds","timerSpan","interval","hidden","location","protocol","hostname","path","Audio","play","samePCBtn","networkBtn","instructionsBtn","initGame","mode","dimensionsSelect","selectedIndex","Network","ex","console","SamePC","Instructions","navigator","canShare","shareData","href","share","catch","err","initGoogleSSO","loadStats","Settings","updatePlayerDimensions","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__"],"sourceRoot":""}