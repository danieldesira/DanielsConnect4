(()=>{"use strict";var e={583:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BoardLogic=void 0;var o=n(304),r=n(39),i=n(259),a=function(){function e(e){var t=this;switch(this.board=[],this.getColumns=function(){return t.columns},this.getRows=function(){return t.rows},this.getBoard=function(){return t.board},this.resetBoard=function(){return t.initBoard()},e){case i.BoardDimensions.Small:this.columns=o.dimensions.small.columns,this.rows=o.dimensions.small.rows;break;case i.BoardDimensions.Medium:this.columns=o.dimensions.medium.columns,this.rows=o.dimensions.medium.rows;break;case i.BoardDimensions.Large:this.columns=o.dimensions.large.columns,this.rows=o.dimensions.large.rows}this.initBoard()}return e.prototype.initBoard=function(){this.board=new Array(this.columns);for(var e=0;e<this.columns;e++){this.board[e]=new Array(this.rows);for(var t=0;t<this.rows;t++)this.board[e][t]=r.Coin.Empty}},e.prototype.countConsecutiveCoins=function(e,t,n){for(var o=t,r=0;r<4&&o<this.rows&&this.board[e][o]===n;)r++,o++;if(r<4){for(r=0,o=e;o<this.columns&&this.board[o][t]===n;)r++,o++;for(o=e-1;o>-1&&this.board[o][t]===n;)r++,o--;if(r<4){r=0;for(var i=t-1,a=e+1;r<4&&i>-1&&a<this.columns&&this.board[a][i]===n;)r++,a++,i--;for(a=e,i=t;r<4&&i<this.rows&&a>-1&&this.board[a][i]===n;)r++,a--,i++;if(r<4){for(r=0,i=t-1,a=e-1;r<4&&i>-1&&a>-1&&this.board[a][i]===n;)r++,a--,i--;for(a=e,i=t;r<4&&i<this.rows&&a<this.columns&&this.board[a][i]===n;)r++,a++,i++}}}return r},e.prototype.isBoardFull=function(){for(var e=!0,t=0;t<this.columns;t++)if(this.board[t][0]===r.Coin.Empty){e=!1;break}return e},e.prototype.putCoin=function(e,t){for(var n=this.rows-1;n>=0;n--)if(this.board[t][n]===r.Coin.Empty)return this.board[t][n]=e,n;return-1},e.prototype.setBoard=function(e){this.board=e},e.prototype.setBoardItem=function(e,t,n){this.board[t][n]=e},e}();t.BoardLogic=a},304:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dimensions=t.skipTurnMaxWait=void 0,t.skipTurnMaxWait=60,t.dimensions={small:{columns:6,rows:5},medium:{columns:7,rows:6},large:{columns:9,rows:8}}},39:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Coin=void 0,function(e){e[e.Empty=0]="Empty",e[e.Red=1]="Red",e[e.Green=2]="Green"}(n||(t.Coin=n={}))},259:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BoardDimensions=void 0,function(e){e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large"}(n||(t.BoardDimensions=n={}))},118:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BoardDimensions=t.dimensions=t.skipTurnMaxWait=t.switchTurn=t.randomiseColor=t.WinnerMessage=t.TieMessage=t.SkipTurnMessage=t.InitialMessage=t.GameMessage=t.ErrorMessage=t.DisconnectMessage=t.CurrentTurnMessage=t.ActionMessage=t.Coin=t.default=void 0;var o=n(583);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.BoardLogic}});var r=n(39);Object.defineProperty(t,"Coin",{enumerable:!0,get:function(){return r.Coin}});var i=n(237);Object.defineProperty(t,"ActionMessage",{enumerable:!0,get:function(){return i.ActionMessage}});var a=n(671);Object.defineProperty(t,"CurrentTurnMessage",{enumerable:!0,get:function(){return a.CurrentTurnMessage}});var s=n(602);Object.defineProperty(t,"DisconnectMessage",{enumerable:!0,get:function(){return s.DisconnectMessage}});var c=n(297);Object.defineProperty(t,"ErrorMessage",{enumerable:!0,get:function(){return c.ErrorMessage}});var l=n(905);Object.defineProperty(t,"GameMessage",{enumerable:!0,get:function(){return l.GameMessage}});var u=n(164);Object.defineProperty(t,"InitialMessage",{enumerable:!0,get:function(){return u.InitialMessage}});var d=n(462);Object.defineProperty(t,"SkipTurnMessage",{enumerable:!0,get:function(){return d.SkipTurnMessage}});var p=n(684);Object.defineProperty(t,"TieMessage",{enumerable:!0,get:function(){return p.TieMessage}});var h=n(651);Object.defineProperty(t,"WinnerMessage",{enumerable:!0,get:function(){return h.WinnerMessage}});var m=n(635);Object.defineProperty(t,"randomiseColor",{enumerable:!0,get:function(){return m.randomiseColor}}),Object.defineProperty(t,"switchTurn",{enumerable:!0,get:function(){return m.switchTurn}});var f=n(304);Object.defineProperty(t,"skipTurnMaxWait",{enumerable:!0,get:function(){return f.skipTurnMaxWait}}),Object.defineProperty(t,"dimensions",{enumerable:!0,get:function(){return f.dimensions}});var y=n(259);Object.defineProperty(t,"BoardDimensions",{enumerable:!0,get:function(){return y.BoardDimensions}})},237:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ActionMessage=void 0;var i=function(e){function t(t,n,o){var r=e.call(this)||this;return r.column=t,r.action=n,r.color=o,r}return r(t,e),t}(n(905).GameMessage);t.ActionMessage=i},671:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentTurnMessage=void 0;var i=n(39),a=function(e){function t(){var t=e.call(this)||this;return t.currentTurn=i.Coin.Empty,t}return r(t,e),t}(n(905).GameMessage);t.CurrentTurnMessage=a},602:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DisconnectMessage=void 0;var i=function(e){function t(){var t=e.call(this)||this;return t.hardDisconnect=!0,t}return r(t,e),t}(n(905).GameMessage);t.DisconnectMessage=i},297:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMessage=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n.error=t,n}return r(t,e),t}(n(905).GameMessage);t.ErrorMessage=i},905:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameMessage=void 0;var n=function(){function e(){}return e.isInitialMessage=function(e){return!isNaN(e.gameId)&&e.color||e.opponentName},e.isInactivityMessage=function(e){return e.endGameDueToInactivity&&e.currentTurn},e.isActionMessage=function(e){return e.action&&!isNaN(e.column)&&e.color},e.isSkipTurnMessage=function(e){return e.skipTurn&&e.currentTurn},e.isWinnerMessage=function(e){return e.winner},e.isTieMessage=function(e){return e.tie},e.isCurrentTurnMessage=function(e){return e.currentTurn},e.isDisconnectMessage=function(e){return e.hardDisconnect},e.isErrorMessage=function(e){return e.error},e}();t.GameMessage=n},164:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.InitialMessage=void 0;var i=function(e){function t(t,n,o,r){var i=e.call(this)||this;return i.gameId=t,i.playerName=n,i.opponentName=o,i.color=r,i}return r(t,e),t}(n(905).GameMessage);t.InitialMessage=i},462:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SkipTurnMessage=void 0;var i=function(e){function t(t,n){var o=e.call(this)||this;return o.skipTurn=t,o.currentTurn=n,o}return r(t,e),t}(n(905).GameMessage);t.SkipTurnMessage=i},684:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TieMessage=void 0;var i=function(e){function t(t){void 0===t&&(t=!0);var n=e.call(this)||this;return n.tie=t,n}return r(t,e),t}(n(905).GameMessage);t.TieMessage=i},651:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WinnerMessage=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n.winner=t,n}return r(t,e),t}(n(905).GameMessage);t.WinnerMessage=i},635:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.switchTurn=t.randomiseColor=void 0;var o=n(39);t.randomiseColor=function(){return Math.floor(2*Math.random())+1},t.switchTurn=function(e){return e===o.Coin.Red?o.Coin.Green:o.Coin.Red}},978:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.updatePlayerDimensions=t.initGoogleSSO=t.loadStats=t.getToken=t.logout=t.showLoginLogout=t.handleGoogleSignon=void 0;var i=n(541),a=n(833),s=n(365);function c(e){return o(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return n={token:e.credential,service:"google"},localStorage.setItem("auth",JSON.stringify(n)),[4,l()];case 1:return t.sent(),[2]}var n}))}))}function l(){return o(this,void 0,void 0,(function(){var e,t;return r(this,(function(n){switch(n.label){case 0:return e=document.getElementById("login-btns"),t=document.getElementById("authPlayerArea"),localStorage.getItem("auth")?(e.classList.add("hide"),t.classList.remove("hide"),[4,d()]):[3,2];case 1:return n.sent(),[3,3];case 2:e.classList.remove("hide"),t.classList.add("hide"),document.getElementById("statsContainer").innerText="",n.label=3;case 3:return[2]}}))}))}function u(){var e=localStorage.getItem("auth");return e?JSON.parse(e):null}function d(){return o(this,void 0,void 0,(function(){var e,t,n;return r(this,(function(o){switch(o.label){case 0:return e=u(),[4,fetch("".concat(i.default.httpServer,"/auth?token=").concat(e.token,"&service=").concat(e.service))];case 1:return[4,o.sent().json()];case 2:return t=o.sent(),document.getElementById("authPlayerName").innerText=t.user,document.getElementById("authPlayerPicture").src=t.picUrl,(n=document.querySelector("#dimensions option[value='".concat(t.dimensions,"']"))).ariaSelected="true",n.selected=!0,[2]}}))}))}t.handleGoogleSignon=c,t.showLoginLogout=l,t.logout=function(){localStorage.removeItem("auth"),l()},t.getToken=u,t.loadStats=function(){return o(this,void 0,void 0,(function(){var e,t;return r(this,(function(n){switch(n.label){case 0:return e=u(),[4,fetch("".concat(i.default.httpServer,"/stats?token=").concat(e.token,"&service=").concat(e.service))];case 1:return[4,n.sent().json()];case 2:return t=n.sent(),document.getElementById("statsContainer").innerText="Wins: ".concat(t.wins," - ").concat(t.winPercent.toFixed(2),"%\nLosses: ").concat(t.losses," - ").concat(t.lossPercent.toFixed(2),"%"),[2]}}))}))},t.initGoogleSSO=function(){window.google.accounts.id.initialize({client_id:"966331594657-sjtp3m7ooigjma726j7aa4kcf5qdu2v7.apps.googleusercontent.com",callback:c}),window.google.accounts.id.prompt()},t.updatePlayerDimensions=function(e){return o(this,void 0,void 0,(function(){var t,n,o,c;return r(this,(function(r){switch(r.label){case 0:return t=u(),n=t.token,o=t.service,c={token:n,service:o,dimensions:parseInt(e.value)},[4,fetch("".concat(i.default.httpServer,"/update-dimensions"),{method:"post",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)})];case 1:return 200===r.sent().status&&a.default.notify({title:"Dimensions",text:["Dimensions updated successfully!"],id:s.DialogIds.Saved}),[2]}}))}))}},541:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(721).default.isLocal()?{httpServer:"http://localhost:3000",wsServer:"ws://localhost:3000"}:{httpServer:"https://daniels-connect4-server.adaptable.app",wsServer:"wss://daniels-connect4-server.adaptable.app"};t.default=o},833:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(305),r=function(){function e(){}return e.modal=function(e,t){var n=this;if(!document.getElementById(t.id)){var r=document.createElement("div");if(r.tabIndex=1,r.id=t.id,r.classList.add("dialog"),t.title){var i=document.createElement("h1");i.innerText=t.title,i.classList.add("dialog-title"),r.appendChild(i),r.appendChild(document.createElement("hr"))}var a=document.createElement("div");switch(this.appendText(t.text,a),r.appendChild(a),e){case o.DialogType.Confirmation:var s=t;(c=document.createElement("div")).classList.add("dialog-btn-container"),r.appendChild(c),this.appendBtn(c,"Yes",(function(){s.yesCallback(),n.closeModal(r)}),s.yesColor,"button"),this.appendBtn(c,"No",(function(){s.noCallback(),n.closeModal(r)}),s.noColor,"button");break;case o.DialogType.Notification:var c;(c=document.createElement("div")).classList.add("dialog-btn-container"),r.appendChild(c),this.appendBtn(c,"OK",(function(){n.closeModal(r)}),"green","button"),r.addEventListener("keydown",(function(e){"Escape"!==e.key&&"Enter"!==e.key||n.closeModal(r)}));break;case o.DialogType.Prompt:var l=t;this.appendForm(r,l)}document.body.appendChild(r)}},e.appendBtn=function(e,t,n,o,r){var i=document.createElement("button");i.type=r,i.innerText=t,i.classList.add("text"),i.classList.add("dialog-btn"),i.classList.add("dialog-btn-".concat(o)),"button"===r&&i.addEventListener("click",n),e.appendChild(i)},e.appendForm=function(e,t){var n=this,o=document.createElement("div");o.classList.add("dialog-input-container"),e.appendChild(o);var r=document.createElement("form");o.appendChild(r),r.addEventListener("submit",(function(o){o.preventDefault(),t.onOK(),n.closeModal(e)})),this.appendInputs(r,t.inputs);var i=document.createElement("div");i.classList.add("dialog-btn-container"),r.appendChild(i),this.appendBtn(i,"OK",null,"green","submit"),this.appendBtn(i,"Cancel",(function(){t.onCancel(),n.closeModal(e)}),"red","button")},e.appendInputs=function(e,t){for(var n=0;n<t.length;n++){var o=document.createElement("input");o.type=t[n].type,o.id="dialog-input-".concat(t[n].name),o.name="dialog-input-".concat(t[n].name),o.placeholder="Enter ".concat(t[n].label),o.maxLength=t[n].limit,o.classList.add("dialog-input"),o.classList.add("text"),o.required=t[n].required,o.ariaRequired=t[n].required.toString(),e.appendChild(o),this.appendBrElement(e),this.appendBrElement(e)}},e.appendBrElement=function(e){var t=document.createElement("br");e.appendChild(t)},e.appendText=function(e,t){t.classList.add("text"),t.classList.add("dialog-text");for(var n=0;n<e.length;n++){var o=document.createElement("p");o.innerText=e[n],t.appendChild(o)}},e.closeModal=function(e){document.body.contains(e)&&document.body.removeChild(e)},e.confirm=function(t){e.modal(o.DialogType.Confirmation,t)},e.notify=function(t){e.modal(o.DialogType.Notification,t)},e.prompt=function(t){e.modal(o.DialogType.Prompt,t)},e.closeAllOpenDialogs=function(){for(var e=document.getElementsByClassName("dialog"),t=0;t<e.length;t++)this.closeModal(e[t])},e}();t.default=r},305:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DialogType=void 0,function(e){e[e.Confirmation=0]="Confirmation",e[e.Notification=1]="Notification",e[e.Prompt=2]="Prompt"}(n||(t.DialogType=n={}))},365:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DialogIds=void 0,function(e){e.PlayerNames="player-input-dialog",e.ServerError="server-error-dialog",e.Instructions="instructions-dialog",e.GameEnd="game-end-dialog",e.ExitGame="exit-game-dialog",e.ContinueGame="continue-game-dialog",e.Saved="saved-notification-dialog"}(n||(t.DialogIds=n={}))},607:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GameMode=void 0,function(e){e[e.SamePC=1]="SamePC",e[e.Network=2]="Network"}(n||(t.GameMode=n={}))},998:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Sound=void 0,function(e){e.LandCoin="./sounds/land-coin.m4a",e.Win="./sounds/win.m4a",e.Lose="./sounds/lose.m4a"}(n||(t.Sound=n={}))},664:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(42),r=n(698),i=n(118),a=function(){function e(e){var t=this;this.turn=i.Coin.Red,this.currentCoinColumn=4,this.resizeCanvas=function(){t.canvas.height=window.innerHeight-100,t.canvas.width=window.innerWidth,t.canvas.width<1e3?t.coinRadius=20:t.coinRadius=30,t.colGap=t.canvas.width/t.board.getColumns(),t.rowGap=(t.canvas.height-100)/t.board.getRows(),t.colOffset=t.colGap/2,t.paintBoard()},this.canvas=document.getElementById(e.canvasId),this.context=this.canvas.getContext("2d"),e.exitBtnId&&(this.exitBtn=document.getElementById(e.exitBtnId)),e.playerRedId&&e.playerGreenId&&(this.playerNameSection=new r.default(e.playerRedId,e.playerGreenId)),e.gameIndicatorsId&&(this.gameIndicatorsContainer=document.getElementById(e.gameIndicatorsId)),e.menuId&&(this.gameMenu=document.getElementById(e.menuId))}return e.prototype.start=function(){this.showGame(),this.playerNameSection&&(this.playerNameSection.initPlayerNames(),this.playerNameSection.indicateTurn(this.turn)),this.resizeCanvas(),this.setGameEvents()},e.prototype.paintBoard=function(){var t=this.context.createLinearGradient(0,0,this.canvas.width,0);t.addColorStop(0,"blue"),t.addColorStop(1,"aqua"),this.context.fillStyle=t,this.context.fillRect(0,e.verticalOffset,this.canvas.width,this.canvas.height);for(var n=this.board.getColumns()-1;n>=0;n--)for(var o=this.board.getRows()-1;o>=0;o--)this.context.fillStyle=e.getColor(this.board.getBoard()[n][o]),this.drawCoin(n,o)},e.prototype.setGameEvents=function(){this.canvas.addEventListener("mousemove",this.canvasMousemove,!1),this.canvas.addEventListener("click",this.canvasClick,!1),window.addEventListener("beforeunload",this.beforeUnload),window.addEventListener("resize",this.resizeCanvas),this.exitBtn.addEventListener("click",this.exit),document.body.addEventListener("keydown",this.handleKeyDown),this.canvas.addEventListener("touchmove",this.canvasTouchmove)},e.prototype.getColumnFromCursorPosition=function(e){var t=o.default.getCursorPosition(e,this.canvas);return Math.round((t.x-this.colOffset)/this.colGap)},e.prototype.switchTurn=function(){this.turn=(0,i.switchTurn)(this.turn),this.playerNameSection&&this.playerNameSection.indicateTurn(this.turn)},e.prototype.moveCoin=function(){this.clearUpper(),this.context.fillStyle=e.getColor(this.turn),this.paintCoinToDrop(this.currentCoinColumn)},e.prototype.landCoin=function(){if(this.board.getBoard()[this.currentCoinColumn][0]===i.Coin.Empty){var t=this.board.putCoin(this.turn,this.currentCoinColumn);return this.context.fillStyle=e.getColor(this.turn),this.drawCoin(this.currentCoinColumn,t),t}return-1},e.prototype.closeGameAfterWinning=function(){var e=this;this.cleanUpEvents(),this.exitBtn&&this.exitBtn.classList.add("hide"),setTimeout((function(){e.resetValues(),e.hideGame(),e.playerNameSection&&e.playerNameSection.clear()}),3e3)},e.prototype.paintCoinToDrop=function(e){this.context.beginPath(),this.context.arc(this.colOffset+e*this.colGap,this.coinRadius,this.coinRadius,0,2*Math.PI),this.context.closePath(),this.context.fill()},e.prototype.clearUpper=function(){this.context.clearRect(0,0,this.canvas.width,e.verticalOffset)},e.prototype.cleanUpEvents=function(){this.canvas.removeEventListener("mousemove",this.canvasMousemove,!1),this.canvas.removeEventListener("click",this.canvasClick,!1),window.removeEventListener("beforeunload",this.beforeUnload),window.removeEventListener("resize",this.resizeCanvas),this.exitBtn.removeEventListener("click",this.exit),document.body.removeEventListener("keydown",this.handleKeyDown),this.canvas.removeEventListener("touchmove",this.canvasTouchmove)},e.prototype.exit=function(){this.cleanUpEvents(),this.hideGame(),this.resetValues(),this.playerNameSection&&this.playerNameSection.clear()},e.prototype.resetValues=function(){this.turn=i.Coin.Red,this.board.resetBoard(),this.playerNameSection&&this.playerNameSection.reset()},e.prototype.drawCoin=function(t,n){this.context.beginPath(),this.context.arc(this.colOffset+t*this.colGap,2*e.verticalOffset+n*this.rowGap,this.coinRadius,0,2*Math.PI),this.context.closePath(),this.context.fill()},e.prototype.areBothPlayersConnected=function(){return this.playerNameSection&&this.playerNameSection.areBothPlayersConnected()},e.prototype.showGame=function(){this.canvas.classList.remove("hide"),this.exitBtn.classList.remove("hide"),this.gameIndicatorsContainer.classList.remove("hide"),this.gameMenu.classList.add("hide")},e.prototype.hideGame=function(){this.canvas.classList.add("hide"),this.exitBtn.classList.add("hide"),this.gameIndicatorsContainer.classList.add("hide"),this.gameMenu.classList.remove("hide")},e.getColor=function(e){var t="";switch(e){case i.Coin.Empty:t="lightyellow";break;case i.Coin.Red:t="red";break;case i.Coin.Green:t="greenyellow"}return t},e.verticalOffset=70,e.moveLeftKeys=["a","A","ArrowLeft"],e.moveRightKeys=["d","D","ArrowRight"],e}();t.default=a},547:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(39),a=n(833),s=n(998),c=n(664),l=n(771),u=n(721),d=n(118),p=n(365),h=n(978),m=n(583),f=function(e){function t(t){var n=e.call(this,t)||this;return n.onSocketMessage=function(e){if(d.GameMessage.isInitialMessage(e)){var t=e;n.socket&&n.playerNameSection&&(t.opponentName&&(n.toggleWaitingClass(),n.socket.getPlayerColor()===i.Coin.Red?n.playerNameSection.setPlayerGreen(t.opponentName):n.socket.getPlayerColor()===i.Coin.Green&&n.playerNameSection.setPlayerRed(t.opponentName)),t.playerName&&(n.socket.getPlayerColor()===i.Coin.Red?n.playerNameSection.setPlayerRed(t.playerName):n.socket.getPlayerColor()===i.Coin.Green&&n.playerNameSection.setPlayerGreen(t.playerName)),t.color&&(t.color===i.Coin.Red?n.playerNameSection.setPlayerRed(n.socket.getPlayerName()):n.playerNameSection.setPlayerGreen(n.socket.getPlayerName())))}if(d.GameMessage.isActionMessage(e)&&("mousemove"===(t=e).action&&(n.currentCoinColumn=t.column,n.moveCoin()),"click"===t.action&&(n.turn=t.color,n.currentCoinColumn=t.column,n.landCoin())),d.GameMessage.isSkipTurnMessage(e)&&(t=e).skipTurn&&t.currentTurn&&(n.turn=t.currentTurn,n.turnCountDown=d.skipTurnMaxWait,n.toggleWaitingClass()),d.GameMessage.isWinnerMessage(e)){t=e;var o=null;n.playerNameSection&&(o=t.winner===i.Coin.Red?"".concat(n.playerNameSection.getPlayerRed()," (Red)"):"".concat(n.playerNameSection.getPlayerGreen()," (Green)")),n.showWinDialog(o,t.winner),n.closeGameAfterWinning(),document.body.classList.remove("waiting"),n.enableLogoutBtn()}d.GameMessage.isTieMessage(e)&&(a.default.notify({id:p.DialogIds.GameEnd,text:["Game resulted in tie!"],title:null}),document.body.classList.remove("waiting"),n.enableLogoutBtn(),n.closeGameAfterWinning()),d.GameMessage.isCurrentTurnMessage(e)&&(t=e,n.turn=t.currentTurn,n.toggleWaitingClass(),n.playerNameSection&&n.playerNameSection.indicateTurn(n.turn)),d.GameMessage.isDisconnectMessage(e)&&(a.default.notify({id:p.DialogIds.GameEnd,text:["Your opponent disconnected. You win!"],title:"We have a winner!"}),document.body.classList.remove("waiting"),n.enableLogoutBtn(),n.closeGameAfterWinning()),d.GameMessage.isErrorMessage(e)&&(t=e,a.default.closeAllOpenDialogs(),a.default.notify({id:p.DialogIds.ServerError,text:[t.error],title:"Error"}),document.body.classList.remove("waiting"),n.enableLogoutBtn(),n.closeGameAfterWinning())},n.onSocketError=function(){e.prototype.exit.call(n),n.enableLogoutBtn()},n.canvasMousemove=function(e){if(n.socket&&n.turn===n.socket.getPlayerColor()&&n.areBothPlayersConnected()){n.currentCoinColumn=n.getColumnFromCursorPosition(e),n.moveCoin();var t=new d.ActionMessage(n.currentCoinColumn,"mousemove",n.turn);n.socket.send(t)}},n.canvasClick=function(e){if(n.socket&&n.turn===n.socket.getPlayerColor()&&n.areBothPlayersConnected()){n.currentCoinColumn=n.getColumnFromCursorPosition(e);var t=new d.ActionMessage(n.currentCoinColumn,"click",n.turn);n.socket.send(t),n.landCoin()}},n.canvasTouchmove=function(e){if(n.socket&&n.turn===n.socket.getPlayerColor()&&n.areBothPlayersConnected()){var t=e.changedTouches[0];n.currentCoinColumn=n.getColumnFromCursorPosition(t),n.moveCoin();var o=new d.ActionMessage(n.currentCoinColumn,"mousemove",n.turn);n.socket.send(o)}},n.exit=function(){a.default.confirm({id:p.DialogIds.ExitGame,title:null,text:["Network game in progress. Are you sure you want to quit?"],yesCallback:n.confirmExit,noCallback:function(){},yesColor:"red",noColor:"green"})},n.confirmExit=function(){n.socket&&n.socket.close(),a.default.closeAllOpenDialogs(),document.body.classList.remove("waiting"),n.enableLogoutBtn(),e.prototype.exit.call(n)},n.beforeUnload=function(e){e.preventDefault(),e.returnValue=!1},n.turnCountDownCallback=function(){n.areBothPlayersConnected()&&(n.turnCountDown--,n.countdownSpan.innerText=n.turnCountDown.toString(),n.adaptCountDownColor())},n.handleKeyDown=function(e){if(n.socket&&n.turn===n.socket.getPlayerColor()&&n.areBothPlayersConnected()){var t=void 0;c.default.moveLeftKeys.includes(e.key)&&n.currentCoinColumn>0&&(n.currentCoinColumn--,t=new d.ActionMessage(n.currentCoinColumn,"mousemove",n.turn),n.socket.send(t),n.moveCoin()),c.default.moveRightKeys.includes(e.key)&&n.currentCoinColumn<n.board.getColumns()-1&&(n.currentCoinColumn++,t=new d.ActionMessage(n.currentCoinColumn,"mousemove",n.turn),n.socket.send(t),n.moveCoin())," "===e.key&&(t=new d.ActionMessage(n.currentCoinColumn,"click",n.turn),n.socket.send(t),n.landCoin())}"Escape"===e.key&&n.exit()},t.timerCountdownId&&(n.countdownSpan=document.getElementById(t.timerCountdownId)),n.logoutBtn=document.getElementById(t.logoutBtnId),n}return r(t,e),t.getInstance=function(e){return t.instance||(t.instance=new t(e)),t.instance},t.prototype.start=function(t){void 0===t&&(t=d.BoardDimensions.Large),this.board=new m.BoardLogic(t);var n=(0,h.getToken)();n?(this.defineSocket(n),this.startCountdown(),e.prototype.start.call(this),document.body.classList.add("waiting"),this.disableLogoutBtn()):a.default.notify({title:"Error",text:["User not logged in!"],id:p.DialogIds.ServerError})},t.prototype.defineSocket=function(e){this.socket=new l.default(e),this.socket.onMessageCallback=this.onSocketMessage,this.socket.onErrorCallback=this.onSocketError,this.socket.onGameCancel=this.confirmExit},t.prototype.resetValues=function(){e.prototype.resetValues.call(this),this.stopCountdown(),this.socket&&this.socket.close()},t.prototype.landCoin=function(){if(this.board.getBoard()[this.currentCoinColumn][0]===i.Coin.Empty){var t=e.prototype.landCoin.call(this);return this.switchTurn(),this.context.fillStyle=c.default.getColor(this.turn),this.paintCoinToDrop(this.currentCoinColumn),u.default.playSound(s.Sound.LandCoin),this.toggleWaitingClass(),t}return-1},t.prototype.toggleWaitingClass=function(){this.socket.getPlayerColor()===this.turn?document.body.classList.remove("waiting"):document.body.classList.add("waiting")},t.prototype.showWinDialog=function(e,t){var n=[];n.push("".concat(e," wins!")),this.socket&&this.socket.getPlayerColor()===t?(n.push("You win!"),u.default.playSound(s.Sound.Win)):(n.push("You lose!"),u.default.playSound(s.Sound.Lose)),a.default.notify({id:p.DialogIds.GameEnd,text:n,title:"Game Ends"})},t.prototype.switchTurn=function(){e.prototype.switchTurn.call(this),this.resetCountdown()},t.prototype.adaptCountDownColor=function(){this.turnCountDown>d.skipTurnMaxWait/2?(this.countdownSpan.classList.add("green-text"),this.countdownSpan.classList.remove("red-text")):(this.countdownSpan.classList.remove("green-text"),this.countdownSpan.classList.add("red-text"))},t.prototype.startCountdown=function(){this.turnCountDown=d.skipTurnMaxWait,this.turnCountDownInterval=window.setInterval(this.turnCountDownCallback,1e3)},t.prototype.stopCountdown=function(){clearInterval(this.turnCountDownInterval),this.countdownSpan.innerText=""},t.prototype.resetCountdown=function(){this.turnCountDown=d.skipTurnMaxWait},t.prototype.disableLogoutBtn=function(){this.logoutBtn.disabled=!0,this.logoutBtn.ariaDisabled="true"},t.prototype.enableLogoutBtn=function(){this.logoutBtn.disabled=!1,this.logoutBtn.ariaDisabled="false"},t}(c.default);t.default=f},698:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(118),r=function(){function e(e,t){var n=this;this.getPlayerRed=function(){return n.playerRed},this.getPlayerGreen=function(){return n.playerGreen},this.areBothPlayersConnected=function(){return!!n.playerRed&&!!n.playerGreen},e&&(this.playerRedSpan=document.getElementById(e)),t&&(this.playerGreenSpan=document.getElementById(t))}return e.prototype.initPlayerNames=function(){var e="Waiting to connect...";this.playerGreenSpan&&!this.playerGreen&&(this.playerGreenSpan.innerText=e),this.playerRedSpan&&!this.playerRed&&(this.playerRedSpan.innerText=e)},e.prototype.clear=function(){this.playerGreenSpan&&(this.playerGreenSpan.innerText=""),this.playerRedSpan&&(this.playerRedSpan.innerText="")},e.prototype.reset=function(){this.playerRed=null,this.playerGreen=null},e.prototype.setPlayerRed=function(e){this.playerRed=e,this.playerRedSpan&&(this.playerRedSpan.innerText=this.playerRed)},e.prototype.setPlayerGreen=function(e){this.playerGreen=e,this.playerGreenSpan&&(this.playerGreenSpan.innerText=this.playerGreen)},e.prototype.indicateTurn=function(e){e===o.Coin.Red?(this.playerRedSpan.classList.add("currentTurn"),this.playerGreenSpan.classList.remove("currentTurn")):(this.playerGreenSpan.classList.add("currentTurn"),this.playerRedSpan.classList.remove("currentTurn"))},e}();t.default=r},42:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.x=e,this.y=t}return e.getCursorPosition=function(t,n){var o,r;return void 0!==t.pageX||void 0!==t.pageY?(o=t.pageX,r=t.pageY):(o=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,r=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),new e(o-=n.offsetLeft,r-=n.offsetTop)},e}();t.default=n},952:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(833),a=n(664),s=n(998),c=n(721),l=n(656),u=n(118),d=n(365),p=n(583),h=function(e){function t(t){var n=e.call(this,t)||this;return n.setTimer=function(){n.timer&&n.timer.set()},n.continuePreviousGame=function(){n.restoreLastGame(),n.onGameDataCheck()},n.cancelPreviousGame=function(){n.clearGameData(),n.turn=(0,u.randomiseColor)(),n.onGameDataCheck()},n.canvasMousemove=function(e){n.areBothPlayersConnected()&&(n.currentCoinColumn=n.getColumnFromCursorPosition(e),n.moveCoin())},n.canvasClick=function(e){n.areBothPlayersConnected()&&(n.currentCoinColumn=n.getColumnFromCursorPosition(e),n.landCoin())},n.canvasTouchmove=function(e){if(n.areBothPlayersConnected()){var t=e.changedTouches[0];n.currentCoinColumn=n.getColumnFromCursorPosition(t),n.moveCoin()}},n.exit=function(){n.saveGame(),i.default.closeAllOpenDialogs(),n.timer&&n.timer.stop(),e.prototype.exit.call(n)},n.beforeUnload=function(){n.saveGame()},n.pageVisibilityChange=function(){n.timer&&n.timer.pauseWhenDocumentHidden()},n.handleKeyDown=function(e){n.areBothPlayersConnected()&&(a.default.moveLeftKeys.includes(e.key)&&n.currentCoinColumn>0&&(n.currentCoinColumn--,n.moveCoin()),a.default.moveRightKeys.includes(e.key)&&n.currentCoinColumn<n.board.getColumns()-1&&(n.currentCoinColumn++,n.moveCoin())," "===e.key&&n.landCoin()),"Escape"===e.key&&n.exit()},t.timerCountdownId&&(n.timer=new l.default(t.timerCountdownId)),n}return r(t,e),t.getInstance=function(e){return t.instance||(t.instance=new t(e)),t.instance},t.prototype.start=function(e){void 0===e&&(e=u.BoardDimensions.Large),this.dimensions=e,this.board=new p.BoardLogic(e),this.checkGameData()},t.prototype.onGameDataCheck=function(){this.setUpPlayerNames(),this.areBothPlayersConnected()&&this.setTimer(),e.prototype.start.call(this)},t.prototype.setUpPlayerNames=function(){var e=this,t=JSON.parse(localStorage.getItem("gameData"));this.getGameDimensionData(t)||i.default.prompt({id:d.DialogIds.PlayerNames,title:"Input Players",text:["Please enter player names! (10 characters or less.)"],onOK:function(){return t=document.getElementById("dialog-input-red"),n=document.getElementById("dialog-input-green"),void(t.value&&n.value&&t.value.trim()&&n.value.trim()&&e.playerNameSection&&(e.playerNameSection.setPlayerRed(t.value),e.playerNameSection.setPlayerGreen(n.value),e.setTimer()));var t,n},onCancel:this.exit,inputs:[{label:"Player Red",name:"red",type:"text",limit:10,required:!0},{label:"Player Green",name:"green",type:"text",limit:10,required:!0}]})},t.prototype.checkGameData=function(){var e=JSON.parse(localStorage.getItem("gameData"));this.getGameDimensionData(e)?i.default.confirm({id:d.DialogIds.ContinueGame,title:null,text:["Do you want to continue playing the previous game?"],yesCallback:this.continuePreviousGame,noCallback:this.cancelPreviousGame,yesColor:"green",noColor:"red"}):(this.turn=(0,u.randomiseColor)(),this.onGameDataCheck())},t.prototype.restoreLastGame=function(){var e=JSON.parse(localStorage.getItem("gameData")),t=this.getGameDimensionData(e);this.turn=t.nextTurn,this.board.setBoard(t.board),this.timer&&this.timer.setSecondsRunning(t.secondsRunning),this.playerNameSection&&(this.playerNameSection.setPlayerGreen(t.playerGreen),this.playerNameSection.setPlayerRed(t.playerRed))},t.prototype.saveGame=function(){var e,t,n;if(this.areBothPlayersConnected()){var o=JSON.parse(localStorage.getItem("gameData"));o||(o={small:null,medium:null,large:null});var r={nextTurn:this.turn,board:this.board.getBoard(),secondsRunning:null===(e=this.timer)||void 0===e?void 0:e.getSecondsRunning(),playerRed:null===(t=this.playerNameSection)||void 0===t?void 0:t.getPlayerRed(),playerGreen:null===(n=this.playerNameSection)||void 0===n?void 0:n.getPlayerGreen()};switch(this.dimensions){case u.BoardDimensions.Small:o.small=r;break;case u.BoardDimensions.Medium:o.medium=r;break;case u.BoardDimensions.Large:o.large=r}localStorage.setItem("gameData",JSON.stringify(o))}},t.prototype.closeGameAfterWinning=function(){this.clearGameData(),this.timer&&this.timer.stop(),e.prototype.closeGameAfterWinning.call(this)},t.prototype.landCoin=function(){if(this.board.getBoard()[this.currentCoinColumn][0]===u.Coin.Empty){var t=e.prototype.landCoin.call(this);if(this.board.countConsecutiveCoins(this.currentCoinColumn,t,this.turn)>=4){var n="";this.playerNameSection&&(this.turn===u.Coin.Red?n="".concat(this.playerNameSection.getPlayerRed()," (Red)"):this.turn===u.Coin.Green&&(n="".concat(this.playerNameSection.getPlayerGreen()," (Green)"))),this.showWinDialog(n,this.turn),this.closeGameAfterWinning()}else if(this.board.isBoardFull()){var o="";this.playerNameSection&&(o+="".concat(this.playerNameSection.getPlayerRed()," (Red) and ").concat(this.playerNameSection.getPlayerGreen()," (Green)")),o+=" are tied!",i.default.notify({id:d.DialogIds.GameEnd,title:"Tie",text:[o]}),this.closeGameAfterWinning()}else this.switchTurn(),this.context.fillStyle=a.default.getColor(this.turn),this.paintCoinToDrop(this.currentCoinColumn),c.default.playSound(s.Sound.LandCoin);return t}return-1},t.prototype.setGameEvents=function(){e.prototype.setGameEvents.call(this),document.addEventListener("visibilitychange",this.pageVisibilityChange)},t.prototype.cleanUpEvents=function(){e.prototype.cleanUpEvents.call(this),document.removeEventListener("changevisibility",this.pageVisibilityChange)},t.prototype.showWinDialog=function(e,t){var n=new Array;n.push("".concat(e," wins!")),this.timer&&n.push("Time taken: ".concat(this.timer.getTimeInStringFormat())),c.default.playSound(s.Sound.Win),i.default.notify({id:d.DialogIds.GameEnd,text:n,title:"We have a winner!"})},t.prototype.resetValues=function(){e.prototype.resetValues.call(this),this.timer&&this.timer.reset()},t.prototype.clearGameData=function(){var e=JSON.parse(localStorage.getItem("gameData"));switch(this.dimensions){case u.BoardDimensions.Small:e.small=null;break;case u.BoardDimensions.Medium:e.medium=null;break;case u.BoardDimensions.Large:e.large=null}localStorage.setItem("gameData",JSON.stringify(e))},t.prototype.getGameDimensionData=function(e){var t=null;if(e)switch(this.dimensions){case u.BoardDimensions.Small:t=e.small;break;case u.BoardDimensions.Medium:t=e.medium;break;case u.BoardDimensions.Large:t=e.large}return t},t}(a.default);t.default=h},771:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(978),r=n(541),i=n(833),a=n(365),s=n(118),c=function(){function e(e){var t=this;this.send=function(e){return t.webSocket.send(JSON.stringify(e))},this.getPlayerColor=function(){return t.playerColor},this.getPlayerName=function(){return t.playerName},this.onMessage=function(e){var n=JSON.parse(e.data);if(s.GameMessage.isInitialMessage(n)){var o=n;t.gameId||(t.gameId=o.gameId),t.playerName||(t.playerName=o.playerName),t.playerColor||(t.playerColor=o.color)}t.onMessageCallback&&t.onMessageCallback(n)},this.onError=function(){t.onErrorCallback(),i.default.closeAllOpenDialogs(),i.default.notify({id:a.DialogIds.ServerError,text:["Problem connecting to server!"],title:"Error"}),document.body.classList.remove("waiting")},this.onClose=function(){var e=(0,o.getToken)();e&&t.connect(e)},this.connect(e)}return e.prototype.connect=function(e){var t="".concat(r.default.wsServer,"?token=").concat(e.token,"&service=").concat(e.service);this.playerColor&&!isNaN(this.gameId)&&(t+="&playerColor=".concat(this.playerColor,"&gameId=").concat(this.gameId)),this.webSocket=new WebSocket(t),this.webSocket.onmessage=this.onMessage,this.webSocket.onerror=this.onError,this.webSocket.onclose=this.onClose},e.prototype.close=function(){this.webSocket.onclose=null,this.webSocket.onmessage=null,this.webSocket.onerror=null,this.webSocket.close()},e}();t.default=c},656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.timerCallback=function(){t.secondsRunning++;var e=Math.floor(t.secondsRunning/60),n=t.secondsRunning%60;t.timerSpan.innerText="".concat(e,":").concat(n<10?"0":"").concat(n),t.timerSpan.classList.contains("hide")&&clearInterval(t.interval)},this.getSecondsRunning=function(){return t.secondsRunning},this.timerSpan=document.getElementById(e),this.secondsRunning=0}return e.prototype.set=function(){this.timerSpan&&(this.timerSpan.classList.remove("hide"),this.interval=window.setInterval(this.timerCallback,1e3))},e.prototype.stop=function(){this.interval&&(clearInterval(this.interval),this.timerSpan.innerText="",this.timerSpan.classList.add("hide"))},e.prototype.pauseWhenDocumentHidden=function(){document.hidden?clearInterval(this.interval):this.interval=window.setInterval(this.timerCallback,1e3)},e.prototype.getTimeInStringFormat=function(){return this.timerSpan?this.timerSpan.innerText:""},e.prototype.setSecondsRunning=function(e){this.secondsRunning=e},e.prototype.reset=function(){this.secondsRunning=0},e}();t.default=n},721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isLocal=function(){return"file:"===location.protocol||"localhost"===location.hostname},e.playSound=function(e){new Audio(e).play()},e}();t.default=n},519:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(978),a=n(833),s=n(365),c=n(607),l=n(547),u=n(952),d=document.getElementById("samePC"),p=document.getElementById("network"),h=document.getElementById("instructions");function m(e){try{var t=parseInt(f.options[f.selectedIndex].value),n={canvasId:"board",exitBtnId:"exitBtn",timerCountdownId:"timer",playerRedId:"playerRed",playerGreenId:"playerGreen",menuId:"menu",gameIndicatorsId:"gameIndicators",logoutBtnId:"logout"};e===c.GameMode.Network?l.default.getInstance(n).start(t):u.default.getInstance(n).start(t)}catch(e){a.default.notify({id:s.DialogIds.ServerError,title:"Error",text:["Problem encountered!"]}),console.error(e)}}d.addEventListener("click",(function(){m(c.GameMode.SamePC)}),!1),p.addEventListener("click",(function(){m(c.GameMode.Network)}),!1),h.addEventListener("click",(function(){a.default.notify({id:s.DialogIds.Instructions,text:["The principle behind Connect4 is simple:","The player who first places 4 coins next to each other, wins. You may match horizontally, vertically or diagonally.","Furthermore, in Network Play, you must place your coin within 60 seconds. If you fail to do so, you pass the turn to your opponent.","Further note that exiting in Same Device Play, saves game progress. You will be presented with the option to continue the same game the next time. This does not work for Network Play because your opponent might not be available the next time and you might not even know him/her/them.","Good luck and have fun playing!"],title:"Instructions"})}),!1),document.getElementById("shareBtn").addEventListener("click",(function(e){if(e.preventDefault(),navigator.canShare){var t={url:location.href,title:"Daniel's Connect4"};navigator.share(t).catch((function(e){return console.error("Problem while sharing: ".concat(e))}))}else a.default.notify({id:s.DialogIds.ServerError,title:"Error",text:["Problem opening share menu!"]})})),document.getElementById("googleSignon").addEventListener("click",i.initGoogleSSO),o(void 0,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,(0,i.showLoginLogout)()];case 1:return e.sent(),[2]}}))})),document.getElementById("logout").addEventListener("click",i.logout),document.getElementById("stats").addEventListener("click",(function(){return o(void 0,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,(0,i.loadStats)()];case 1:return e.sent(),[2]}}))}))}));var f=document.getElementById("dimensions");f.addEventListener("change",(function(){return o(void 0,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,(0,i.updatePlayerDimensions)(f)];case 1:return e.sent(),[2]}}))}))}))}},t={};!function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(519)})();
//# sourceMappingURL=bundle.js.map