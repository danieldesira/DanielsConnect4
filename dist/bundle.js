(()=>{"use strict";var e={583:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BoardLogic=void 0;var o=n(304),i=n(39),a=n(259),r=function(){function e(e){var t=this;switch(this.board=[],this.getColumns=function(){return t.columns},this.getRows=function(){return t.rows},this.getDimensions=function(){return t.dimensions},this.getBoard=function(){return t.board},this.resetBoard=function(){return t.initBoard()},e){case a.BoardDimensions.Small:this.columns=o.dimensions.small.columns,this.rows=o.dimensions.small.rows;break;case a.BoardDimensions.Medium:this.columns=o.dimensions.medium.columns,this.rows=o.dimensions.medium.rows;break;case a.BoardDimensions.Large:this.columns=o.dimensions.large.columns,this.rows=o.dimensions.large.rows}this.dimensions=e,this.initBoard()}return e.prototype.initBoard=function(){this.board=new Array(this.columns);for(var e=0;e<this.columns;e++){this.board[e]=new Array(this.rows);for(var t=0;t<this.rows;t++)this.board[e][t]=i.Coin.Empty}},e.prototype.countConsecutiveCoins=function(e,t,n){for(var o=t,i=0;i<4&&o<this.rows&&this.board[e][o]===n;)i++,o++;if(i<4){for(i=0,o=e;o<this.columns&&this.board[o][t]===n;)i++,o++;for(o=e-1;o>-1&&this.board[o][t]===n;)i++,o--;if(i<4){i=0;for(var a=t-1,r=e+1;i<4&&a>-1&&r<this.columns&&this.board[r][a]===n;)i++,r++,a--;for(r=e,a=t;i<4&&a<this.rows&&r>-1&&this.board[r][a]===n;)i++,r--,a++;if(i<4){for(i=0,a=t-1,r=e-1;i<4&&a>-1&&r>-1&&this.board[r][a]===n;)i++,r--,a--;for(r=e,a=t;i<4&&a<this.rows&&r<this.columns&&this.board[r][a]===n;)i++,r++,a++}}}return i},e.prototype.isBoardFull=function(){for(var e=!0,t=0;t<this.columns;t++)if(this.board[t][0]===i.Coin.Empty){e=!1;break}return e},e.prototype.putCoin=function(e,t){for(var n=this.rows-1;n>=0;n--)if(this.board[t][n]===i.Coin.Empty)return this.board[t][n]=e,n;return-1},e.prototype.setBoard=function(e){this.board=e},e.prototype.setBoardItem=function(e,t,n){this.board[t][n]=e},e}();t.BoardLogic=r},304:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dimensions=t.skipTurnMaxWait=void 0,t.skipTurnMaxWait=60,t.dimensions={small:{columns:6,rows:5},medium:{columns:7,rows:6},large:{columns:9,rows:8}}},39:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Coin=void 0,function(e){e[e.Empty=0]="Empty",e[e.Red=1]="Red",e[e.Green=2]="Green",e[e.Pink=3]="Pink",e[e.Purple=4]="Purple",e[e.Gold=5]="Gold",e[e.Black=6]="Black"}(n||(t.Coin=n={}))},259:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BoardDimensions=void 0,function(e){e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large"}(n||(t.BoardDimensions=n={}))},118:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BoardDimensions=t.dimensions=t.skipTurnMaxWait=t.switchTurn=t.randomiseTurn=t.GameMessage=t.Coin=t.default=void 0;var o=n(583);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.BoardLogic}});var i=n(39);Object.defineProperty(t,"Coin",{enumerable:!0,get:function(){return i.Coin}});var a=n(905);Object.defineProperty(t,"GameMessage",{enumerable:!0,get:function(){return a.GameMessage}});var r=n(635);Object.defineProperty(t,"randomiseTurn",{enumerable:!0,get:function(){return r.randomiseTurn}}),Object.defineProperty(t,"switchTurn",{enumerable:!0,get:function(){return r.switchTurn}});var s=n(304);Object.defineProperty(t,"skipTurnMaxWait",{enumerable:!0,get:function(){return s.skipTurnMaxWait}}),Object.defineProperty(t,"dimensions",{enumerable:!0,get:function(){return s.dimensions}});var l=n(259);Object.defineProperty(t,"BoardDimensions",{enumerable:!0,get:function(){return l.BoardDimensions}})},905:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameMessage=void 0;var n=function(){function e(){}return e.isInitialMessage=function(e){return!isNaN(e.gameId)&&e.color&&e.dimensions&&e.playerName||e.opponentName},e.isInactivityMessage=function(e){return e.endGameDueToInactivity&&e.currentTurn},e.isActionMessage=function(e){return e.action&&!isNaN(e.column)&&e.color},e.isWinnerMessage=function(e){return e.winner},e.isTieMessage=function(e){return e.tie},e.isCurrentTurnMessage=function(e){return e.currentTurn},e.isDisconnectMessage=function(e){return e.hardDisconnect},e.isErrorMessage=function(e){return e.error},e}();t.GameMessage=n},635:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.switchTurn=t.randomiseTurn=void 0,t.randomiseTurn=function(){return Math.floor(2*Math.random())+1},t.switchTurn=function(e){return 1===e?2:1}},978:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(541),r=n(833),s=n(365),l=function(){function e(){}var t;return e.handleGoogleSignon=function(e){return o(this,void 0,void 0,(function(){var n;return i(this,(function(o){return n=e.credential,t.storeGoogleToken(n),[2]}))}))},e.storeGoogleToken=function(e){var t={token:e,service:"google"};localStorage.setItem("auth",JSON.stringify(t))},e.getToken=function(){var e=localStorage.getItem("auth");return e?JSON.parse(e):null},e.loadStats=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,t.authGet("".concat(a.default.connections.httpServer,"/stats"))];case 1:return(e=n.sent())&&r.default.notify({id:s.DialogIds.PlayerStats,title:"Stats",text:["Wins: ".concat(e.wins," - ").concat(e.winPercent.toFixed(2),"%"),"Losses: ".concat(e.losses," - ").concat(e.lossPercent.toFixed(2),"%")]}),[2]}}))}))},e.initGoogleSSO=function(e){var n,o,i,a,r,s;null===(i=null===(o=null===(n=null===window||void 0===window?void 0:window.google)||void 0===n?void 0:n.accounts)||void 0===o?void 0:o.id)||void 0===i||i.initialize({client_id:"966331594657-sjtp3m7ooigjma726j7aa4kcf5qdu2v7.apps.googleusercontent.com",callback:function(n){t.handleGoogleSignon(n),e()}}),null===(s=null===(r=null===(a=null===window||void 0===window?void 0:window.google)||void 0===a?void 0:a.accounts)||void 0===r?void 0:r.id)||void 0===s||s.prompt()},e.renderGoogleBtn=function(e){var t,n,o,i=document.getElementById(e);null===(o=null===(n=null===(t=null===window||void 0===window?void 0:window.google)||void 0===t?void 0:t.accounts)||void 0===n?void 0:n.id)||void 0===o||o.renderButton(i,{type:"standard",theme:"outline",size:"large"})},e.updateSettings=function(e){return o(this,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n={dimensions:e},[4,t.authPost("".concat(a.default.connections.httpServer,"/settings"),n)];case 1:return o.sent(),[3,3];case 2:return o.sent(),r.default.notify({title:"Settings",text:["Error saving settings!"],id:s.DialogIds.ServerError}),[3,3];case 3:return[2]}}))}))},e.authGet=function(e){return o(this,void 0,void 0,(function(){var n,o,a,r,s;return i(this,(function(i){switch(i.label){case 0:return(n=t.getToken())?(o=n.token,a=n.service,[4,fetch(e,{headers:{Authorization:o,Service:a}})]):[3,5];case 1:return(r=i.sent()).status>=200&&r.status<300?[4,r.json()]:[3,3];case 2:return s=i.sent(),[3,4];case 3:s=null,i.label=4;case 4:return[2,s];case 5:return[2,null]}}))}))},e.authPost=function(e,n){return o(this,void 0,void 0,(function(){var o,a,r,s;return i(this,(function(i){switch(i.label){case 0:return o=t.getToken(),a=o.token,r=o.service,[4,fetch(e,{method:"post",headers:{Authorization:a,Service:r,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((s=i.sent()).status<200||s.status>=300)throw"HTTP Status Code ".concat(s.status);return[2]}}))}))},t=e,e.logout=function(){return localStorage.removeItem("auth")},e.getUserData=function(){return o(void 0,void 0,void 0,(function(){return i(t,(function(e){switch(e.label){case 0:return[4,t.authGet("".concat(a.default.connections.httpServer,"/auth"))];case 1:return[2,e.sent()]}}))}))},e.getSettings=function(){return o(void 0,void 0,void 0,(function(){return i(t,(function(e){switch(e.label){case 0:return[4,t.authGet("".concat(a.default.connections.httpServer,"/settings"))];case 1:return[2,e.sent()]}}))}))},e.isLoggedIn=function(){return!!localStorage.getItem("auth")},e}();t.default=l},541:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o={title:"Daniel`s Connect4",version:"0.3.8b",connections:n(721).default.isLocal()?{httpServer:"http://localhost:3000",wsServer:"ws://localhost:3000"}:{httpServer:"https://daniels-connect4-server.adaptable.app",wsServer:"wss://daniels-connect4-server.adaptable.app"}};t.default=o},833:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(305),i=function(){function e(){}return e.modal=function(e,t){var n=this;if(!document.getElementById(t.id)){var i=document.createElement("div");if(i.tabIndex=1,i.id=t.id,i.classList.add("dialog"),i.classList.add("fixed"),i.classList.add("text-white"),t.title){var a=document.createElement("h1");a.innerText=t.title,a.classList.add("dialog-title"),a.classList.add("text-xl"),i.appendChild(a),i.appendChild(document.createElement("hr"))}var r=document.createElement("div");switch(this.appendText(t.text,r),i.appendChild(r),e){case o.DialogType.Confirmation:var s=t,l=document.createElement("div");l.classList.add("w-fit"),l.classList.add("m-auto"),i.appendChild(l),this.appendBtn(l,"Yes",(function(){s.yesCallback(),n.closeModal(i)}),s.yesColor,"button"),this.appendBtn(l,"No",(function(){s.noCallback(),n.closeModal(i)}),s.noColor,"button");break;case o.DialogType.Notification:this.appendOKButton(i),this.listenKeyboard(i);break;case o.DialogType.Prompt:var c=t;this.appendForm(i,c);break;case o.DialogType.Credits:c=t,this.appendCredits(r,c),this.appendOKButton(i),this.listenKeyboard(i);break;case o.DialogType.Menu:c=t,this.appendMenu(i,c),this.appendOKButton(i),this.listenKeyboard(i);break;case o.DialogType.Changelog:c=t,this.appendChangelog(i,c),this.appendOKButton(i),this.listenKeyboard(i)}document.body.appendChild(i)}},e.appendBtn=function(e,t,n,o,i){var a=document.createElement("button");a.type=i,a.classList.add("dialog-btn"),a.classList.add("dialog-btn-".concat(o));var r=document.createElement("span");r.classList.add("text-xl"),r.classList.add("ml-1"),r.classList.add("mr-1"),r.innerText=t,a.appendChild(r),"button"===i&&a.addEventListener("click",n),e.appendChild(a)},e.appendForm=function(e,t){var n=this,o=document.createElement("div");o.classList.add("dialog-input-container"),e.appendChild(o);var i=document.createElement("form");o.appendChild(i),i.addEventListener("submit",(function(o){o.preventDefault(),t.onOK&&t.onOK(),n.closeModal(e)})),this.appendInputs(i,t.inputs),this.appendSelects(i,t.selects);var a=document.createElement("div");a.classList.add("w-fit"),a.classList.add("m-auto"),i.appendChild(a),this.appendBtn(a,"OK",null,"green","submit"),this.appendBtn(a,"Cancel",(function(){t.onCancel&&t.onCancel(),n.closeModal(e)}),"red","button")},e.appendInputs=function(e,t){for(var n=0,o=t;n<o.length;n++){var i=o[n],a=document.createElement("input");a.type=i.type,a.id="dialog-input-".concat(i.name),a.name="dialog-input-".concat(i.name),a.ariaPlaceholder="Enter ".concat(i.label),a.placeholder="Enter ".concat(i.label),a.maxLength=i.limit,a.classList.add("dialog-input"),a.required=i.required,a.ariaRequired=i.required.toString(),e.appendChild(a),this.appendBrElement(e),this.appendBrElement(e)}},e.appendSelects=function(e,t){for(var n=function(t){var n=document.createElement("select");n.id="dialog-select-".concat(t.name),n.name="dialog-select-".concat(t.name),n.ariaPlaceholder=t.label,n.classList.add("dialog-input"),n.required=t.required,n.ariaRequired=t.required.toString(),e.appendChild(n);for(var i=0,a=t.options;i<a.length;i++){var r=a[i],s=document.createElement("option");s.innerText=r.text,s.value=r.value,t.default===parseInt(r.value)&&(s.selected=!0,s.ariaSelected="true"),n.appendChild(s)}var l=t.onChange;l&&(l(n.selectedOptions[0].value),n.addEventListener("change",(function(){return l(n.selectedOptions[0].value)}))),o.appendBrElement(e),o.appendBrElement(e)},o=this,i=0,a=t;i<a.length;i++)n(a[i])},e.appendBrElement=function(e){var t=document.createElement("br");e.appendChild(t)},e.appendText=function(e,t){if(t.classList.add("dialog-text"),e)for(var n=0,o=e;n<o.length;n++){var i=o[n],a=document.createElement("p");a.innerText=i,t.appendChild(a)}},e.appendCredits=function(e,t){for(var n=0,o=t.sections;n<o.length;n++){var i=o[n],a=document.createElement("h2");a.classList.add("text-xl"),a.innerText=i.title,e.appendChild(a);var r=document.createElement("ul");r.classList.add("ml-5");for(var s=0,l=i.contributors;s<l.length;s++){var c=l[s],d=document.createElement("li");d.innerText=c,r.appendChild(d)}e.appendChild(r)}},e.appendOKButton=function(e){var t=this,n=document.createElement("div");n.classList.add("dialog-btn-container"),e.appendChild(n),this.appendBtn(n,"OK",(function(){t.closeModal(e)}),"green","button")},e.listenKeyboard=function(e){var t=this;e.addEventListener("keydown",(function(n){"Escape"!==n.key&&"Enter"!==n.key||t.closeModal(e)}))},e.appendMenu=function(e,t){var n=document.createElement("div");n.classList.add("dialog-menu-container"),e.appendChild(n);for(var o=0,i=t.buttons;o<i.length;o++){var a=i[o],r=document.createElement("button");r.type="button",r.innerText=a.text,r.classList.add("dialog-btn"),r.classList.add("dialog-btn-".concat(a.color)),r.addEventListener("click",a.callback),n.appendChild(r)}},e.appendChangelog=function(e,t){var n=document.createElement("div");n.classList.add("dialog-text"),e.appendChild(n);for(var o=0,i=t.releases;o<i.length;o++){var a=i[o],r=document.createElement("h2");r.classList.add("text-xl"),r.innerText="".concat(a.version," (").concat(a.status," release - ").concat(a.dateTime,")"),n.appendChild(r);var s=document.createElement("ul");s.classList.add("ml-5"),n.appendChild(s);for(var l=0,c=a.points;l<c.length;l++){var d=c[l],u=document.createElement("li");if(u.innerText=d.text,s.appendChild(u),d.subPoints&&d.subPoints.length>0){var p=document.createElement("ol");p.classList.add("list-decimal"),p.classList.add("ml-5"),u.appendChild(p);for(var m=0,h=d.subPoints;m<h.length;m++){var f=h[m],g=document.createElement("li");g.innerText=f,p.appendChild(g)}}}}},e.closeModal=function(e){document.body.contains(e)&&document.body.removeChild(e)},e.confirm=function(t){e.modal(o.DialogType.Confirmation,t)},e.notify=function(t){e.modal(o.DialogType.Notification,t)},e.prompt=function(t){e.modal(o.DialogType.Prompt,t)},e.credit=function(t){e.modal(o.DialogType.Credits,t)},e.menu=function(t){e.modal(o.DialogType.Menu,t)},e.changelog=function(t){e.modal(o.DialogType.Changelog,t)},e.closeAllOpenDialogs=function(){for(var e=document.getElementsByClassName("dialog"),t=0;t<e.length;t++)this.closeModal(e[t])},e}();t.default=i},305:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DialogType=void 0,function(e){e[e.Confirmation=0]="Confirmation",e[e.Notification=1]="Notification",e[e.Prompt=2]="Prompt",e[e.Credits=3]="Credits",e[e.Menu=4]="Menu",e[e.Changelog=5]="Changelog"}(n||(t.DialogType=n={}))},663:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(118),i={name:"dimensions",label:"Dimensions",required:!0,options:[{text:"Small (6x5)",value:o.BoardDimensions.Small.toString()},{text:"Medium (7x6)",value:o.BoardDimensions.Medium.toString()},{text:"Large (9x8)",value:o.BoardDimensions.Large.toString()}],default:3,onChange:function(){}};t.default=i},365:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DialogIds=void 0,function(e){e.PlayerNames="player-input-dialog",e.ServerError="server-error-dialog",e.Instructions="instructions-dialog",e.GameEnd="game-end-dialog",e.ExitGame="exit-game-dialog",e.ContinueGame="continue-game-dialog",e.Saved="saved-notification-dialog",e.PlayerStats="player-stats-dialog",e.Settings="settings-dialog",e.Credits="credits-dialog",e.AccountMenu="account-menu-dialog",e.LogoutDisabled="logout-disabled-dialog",e.Changelog="changelog-dialog"}(n||(t.DialogIds=n={}))},607:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GameMode=void 0,function(e){e[e.SamePC=1]="SamePC",e[e.Network=2]="Network"}(n||(t.GameMode=n={}))},998:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Sound=void 0,function(e){e.LandCoin="./sounds/land-coin.m4a",e.Win="./sounds/win.m4a",e.Lose="./sounds/lose.m4a"}(n||(t.Sound=n={}))},263:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(726),i=n(554),a=n(118),r=function(){function e(e){var t=this;this.turn=a.Coin.Red,this.currentCoinColumn=4,this.resizeCanvas=function(){t.canvas.height=window.innerHeight-100,t.canvas.width=window.innerWidth,t.canvas.width<1e3?t.coinRadius=20:t.coinRadius=30,t.board&&(t.colGap=t.canvas.width/t.board.getColumns(),t.rowGap=(t.canvas.height-100)/t.board.getRows(),t.colOffset=t.colGap/2,t.paintBoard())},this.canvas=document.getElementById(e.canvasId),this.context=this.canvas.getContext("2d"),e.exitBtnId&&(this.exitBtn=document.getElementById(e.exitBtnId)),e.playerRedId&&e.playerGreenId&&(this.playerNameSection=new i.default(e.playerRedId,e.playerGreenId)),e.gameIndicatorsId&&(this.gameIndicatorsContainer=document.getElementById(e.gameIndicatorsId)),e.menuId&&(this.gameMenu=document.getElementById(e.menuId)),e.timerId&&(this.timerSpan=document.getElementById(e.timerId)),e.countdownId&&(this.countdownSpan=document.getElementById(e.countdownId))}return e.prototype.start=function(){this.showGame(),this.playerNameSection&&(this.playerNameSection.initPlayerNames(),this.playerNameSection.indicateTurn(this.turn)),this.resizeCanvas(),this.setGameEvents()},e.prototype.paintBoard=function(){var t=this.context.createLinearGradient(0,0,this.canvas.width,0);t.addColorStop(0,"blue"),t.addColorStop(1,"aqua"),this.context.fillStyle=t,this.context.fillRect(0,e.verticalOffset,this.canvas.width,this.canvas.height);for(var n=this.board.getColumns()-1;n>=0;n--)for(var o=this.board.getRows()-1;o>=0;o--)this.context.fillStyle=e.getColor(this.board.getBoard()[n][o]),this.drawCoin(n,o)},e.prototype.setGameEvents=function(){this.canvas.addEventListener("mousemove",this.canvasMousemove,!1),this.canvas.addEventListener("click",this.canvasClick,!1),window.addEventListener("beforeunload",this.beforeUnload),window.addEventListener("resize",this.resizeCanvas),this.exitBtn.addEventListener("click",this.exit),document.body.addEventListener("keydown",this.handleKeyDown),this.canvas.addEventListener("touchmove",this.canvasTouchmove)},e.prototype.getColumnFromCursorPosition=function(e){var t=o.default.getCursorPosition(e,this.canvas);return Math.round((t.x-this.colOffset)/this.colGap)},e.prototype.switchTurn=function(){this.turn=(0,a.switchTurn)(this.turn),this.playerNameSection&&this.playerNameSection.indicateTurn(this.turn)},e.prototype.moveCoin=function(){this.clearUpper(),this.context.fillStyle=e.getColor(this.turn),this.paintCoinToDrop(this.currentCoinColumn)},e.prototype.landCoin=function(){if(this.board.getBoard()[this.currentCoinColumn][0]===a.Coin.Empty){var t=this.board.putCoin(this.turn,this.currentCoinColumn);return this.context.fillStyle=e.getColor(this.turn),this.drawCoin(this.currentCoinColumn,t),t}return-1},e.prototype.closeGameAfterWinning=function(){var e=this;this.cleanUpEvents(),this.exitBtn&&this.exitBtn.classList.add("hidden"),setTimeout((function(){e.resetValues(),e.hideGame(),e.playerNameSection&&e.playerNameSection.clear()}),3e3)},e.prototype.paintCoinToDrop=function(e){this.context.beginPath(),this.context.arc(this.colOffset+e*this.colGap,this.coinRadius,this.coinRadius,0,2*Math.PI),this.context.closePath(),this.context.fill()},e.prototype.clearUpper=function(){this.context.clearRect(0,0,this.canvas.width,e.verticalOffset)},e.prototype.cleanUpEvents=function(){this.canvas.removeEventListener("mousemove",this.canvasMousemove,!1),this.canvas.removeEventListener("click",this.canvasClick,!1),window.removeEventListener("beforeunload",this.beforeUnload),window.removeEventListener("resize",this.resizeCanvas),this.exitBtn.removeEventListener("click",this.exit),document.body.removeEventListener("keydown",this.handleKeyDown),this.canvas.removeEventListener("touchmove",this.canvasTouchmove)},e.prototype.exit=function(){this.cleanUpEvents(),this.hideGame(),this.resetValues(),this.playerNameSection&&this.playerNameSection.clear()},e.prototype.resetValues=function(){this.turn=a.Coin.Red,this.board.resetBoard(),this.playerNameSection&&this.playerNameSection.reset()},e.prototype.drawCoin=function(t,n){this.context.beginPath(),this.context.arc(this.colOffset+t*this.colGap,2*e.verticalOffset+n*this.rowGap,this.coinRadius,0,2*Math.PI),this.context.closePath(),this.context.fill()},e.prototype.areBothPlayersConnected=function(){return this.playerNameSection&&this.playerNameSection.areBothPlayersConnected()},e.prototype.showGame=function(){this.canvas.classList.remove("hidden"),this.exitBtn.classList.remove("hidden"),this.gameIndicatorsContainer.classList.remove("hidden"),this.gameIndicatorsContainer.classList.add("inline-block"),this.gameMenu.classList.add("hidden")},e.prototype.hideGame=function(){this.canvas.classList.add("hidden"),this.exitBtn.classList.add("hidden"),this.gameIndicatorsContainer.classList.add("hidden"),this.gameIndicatorsContainer.classList.remove("inline-block"),this.gameMenu.classList.remove("hidden")},e.getColor=function(e){var t="";switch(e){case a.Coin.Empty:t="lightyellow";break;case a.Coin.Red:t="red";break;case a.Coin.Green:t="greenyellow"}return t},e.verticalOffset=70,e.moveLeftKeys=["a","A","ArrowLeft"],e.moveRightKeys=["d","D","ArrowRight"],e}();t.default=r},819:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(39),r=n(833),s=n(998),l=n(263),c=n(125),d=n(721),u=n(118),p=n(365),m=n(978),h=n(583),f=function(e){function t(t){var n=e.call(this,t)||this;return n.onSocketMessage=function(e){if(u.GameMessage.isInitialMessage(e)){var t=e;n.socket&&n.playerNameSection&&(t.opponentName&&(n.toggleWaitingClass(),n.socket.getPlayerColor()===a.Coin.Red?n.playerNameSection.setPlayerGreen(t.opponentName):n.socket.getPlayerColor()===a.Coin.Green&&n.playerNameSection.setPlayerRed(t.opponentName)),t.playerName&&(n.socket.getPlayerColor()===a.Coin.Red?n.playerNameSection.setPlayerRed(t.playerName):n.socket.getPlayerColor()===a.Coin.Green&&n.playerNameSection.setPlayerGreen(t.playerName)),t.color&&(t.color===a.Coin.Red?n.playerNameSection.setPlayerRed(n.socket.getPlayerName()):n.playerNameSection.setPlayerGreen(n.socket.getPlayerName())),t.dimensions&&(n.board=new h.BoardLogic(t.dimensions),n.resizeCanvas()))}if(u.GameMessage.isActionMessage(e)&&("mousemove"===(t=e).action&&(n.currentCoinColumn=t.column,n.moveCoin()),"click"===t.action&&(n.turn=t.color,n.currentCoinColumn=t.column,n.landCoin())),u.GameMessage.isCurrentTurnMessage(e)&&(t=e,n.turn=t.currentTurn,n.turnCountDown=u.skipTurnMaxWait,n.toggleWaitingClass()),u.GameMessage.isWinnerMessage(e)){t=e;var o=null;n.playerNameSection&&(o=t.winner===a.Coin.Red?"".concat(n.playerNameSection.getPlayerRed()," (Red)"):"".concat(n.playerNameSection.getPlayerGreen()," (Green)")),n.showWinDialog(o,t.winner),n.closeGameAfterWinning(),document.body.classList.remove("cursor-progress")}u.GameMessage.isTieMessage(e)&&(r.default.notify({id:p.DialogIds.GameEnd,text:["Game resulted in tie!"],title:null}),document.body.classList.remove("cursor-progress"),n.closeGameAfterWinning()),u.GameMessage.isCurrentTurnMessage(e)&&(t=e,n.turn=t.currentTurn,n.toggleWaitingClass(),n.playerNameSection&&n.playerNameSection.indicateTurn(n.turn)),u.GameMessage.isDisconnectMessage(e)&&(r.default.notify({id:p.DialogIds.GameEnd,text:["Your opponent disconnected. You win!"],title:"We have a winner!"}),document.body.classList.remove("cursor-progress"),n.closeGameAfterWinning()),u.GameMessage.isErrorMessage(e)&&(t=e,r.default.closeAllOpenDialogs(),r.default.notify({id:p.DialogIds.ServerError,text:[t.error],title:"Error"}),document.body.classList.remove("cursor-progress"),n.closeGameAfterWinning())},n.onSocketError=function(){e.prototype.exit.call(n)},n.canvasMousemove=function(e){if(n.socket&&n.turn===n.socket.getPlayerColor()&&n.areBothPlayersConnected()){n.currentCoinColumn=n.getColumnFromCursorPosition(e),n.moveCoin();var t={column:n.currentCoinColumn,action:"mousemove",color:n.turn};n.socket.send(t)}},n.canvasClick=function(e){if(n.socket&&n.turn===n.socket.getPlayerColor()&&n.areBothPlayersConnected()){n.currentCoinColumn=n.getColumnFromCursorPosition(e);var t={column:n.currentCoinColumn,action:"click",color:n.turn};n.socket.send(t),n.landCoin()}},n.canvasTouchmove=function(e){if(n.socket&&n.turn===n.socket.getPlayerColor()&&n.areBothPlayersConnected()){var t=e.changedTouches[0];n.currentCoinColumn=n.getColumnFromCursorPosition(t),n.moveCoin();var o={column:n.currentCoinColumn,action:"mousemove",color:n.turn};n.socket.send(o)}},n.exit=function(){r.default.confirm({id:p.DialogIds.ExitGame,title:null,text:["Network game in progress. Are you sure you want to quit?"],yesCallback:n.confirmExit,noCallback:function(){},yesColor:"red",noColor:"green"})},n.confirmExit=function(){n.socket&&n.socket.close(),r.default.closeAllOpenDialogs(),document.body.classList.remove("cursor-progress"),e.prototype.exit.call(n)},n.beforeUnload=function(e){e.preventDefault(),e.returnValue=!1},n.turnCountDownCallback=function(){n.areBothPlayersConnected()&&(n.turnCountDown--,n.countdownSpan.innerText=n.turnCountDown.toString(),n.adaptCountDownColor())},n.handleKeyDown=function(e){if(n.socket&&n.turn===n.socket.getPlayerColor()&&n.areBothPlayersConnected()){var t=void 0;l.default.moveLeftKeys.includes(e.key)&&n.currentCoinColumn>0&&(n.currentCoinColumn--,t={column:n.currentCoinColumn,action:"mousemove",color:n.turn},n.socket.send(t),n.moveCoin()),l.default.moveRightKeys.includes(e.key)&&n.currentCoinColumn<n.board.getColumns()-1&&(n.currentCoinColumn++,t={column:n.currentCoinColumn,action:"mousemove",color:n.turn},n.socket.send(t),n.moveCoin())," "===e.key&&(t={column:n.currentCoinColumn,action:"click",color:n.turn},n.socket.send(t),n.landCoin())}"Escape"===e.key&&n.exit()},n}return i(t,e),t.getInstance=function(e){return t.instance||(t.instance=new t(e)),t.instance},t.prototype.start=function(){this.board=new h.BoardLogic(u.BoardDimensions.Large);var t=m.default.getToken();t?(this.defineSocket(t),this.startCountdown(),e.prototype.start.call(this),document.body.classList.add("cursor-progress"),this.timerSpan&&this.timerSpan.classList.add("hidden"),this.countdownSpan&&this.countdownSpan.classList.remove("hidden")):r.default.notify({title:"Error",text:["User not logged in!"],id:p.DialogIds.ServerError})},t.prototype.defineSocket=function(e){this.socket=new c.default(e),this.socket.onMessageCallback=this.onSocketMessage,this.socket.onErrorCallback=this.onSocketError,this.socket.onGameCancel=this.confirmExit},t.prototype.resetValues=function(){e.prototype.resetValues.call(this),this.stopCountdown(),this.socket&&this.socket.close()},t.prototype.landCoin=function(){if(this.board.getBoard()[this.currentCoinColumn][0]===a.Coin.Empty){var t=e.prototype.landCoin.call(this);return this.switchTurn(),this.context.fillStyle=l.default.getColor(this.turn),this.paintCoinToDrop(this.currentCoinColumn),d.default.playSound(s.Sound.LandCoin),this.toggleWaitingClass(),t}return-1},t.prototype.toggleWaitingClass=function(){this.socket.getPlayerColor()===this.turn?document.body.classList.remove("cursor-progress"):document.body.classList.add("cursor-progress")},t.prototype.showWinDialog=function(e,t){var n=[];n.push("".concat(e," wins!")),this.socket&&this.socket.getPlayerColor()===t?(n.push("You win!"),d.default.playSound(s.Sound.Win)):(n.push("You lose!"),d.default.playSound(s.Sound.Lose)),r.default.notify({id:p.DialogIds.GameEnd,text:n,title:"Game Ends"})},t.prototype.switchTurn=function(){e.prototype.switchTurn.call(this),this.resetCountdown()},t.prototype.adaptCountDownColor=function(){this.turnCountDown>u.skipTurnMaxWait/2?(this.countdownSpan.classList.add("green-text"),this.countdownSpan.classList.remove("red-text")):(this.countdownSpan.classList.remove("green-text"),this.countdownSpan.classList.add("red-text"))},t.prototype.startCountdown=function(){this.turnCountDown=u.skipTurnMaxWait,this.turnCountDownInterval=window.setInterval(this.turnCountDownCallback,1e3)},t.prototype.stopCountdown=function(){clearInterval(this.turnCountDownInterval),this.countdownSpan.innerText=""},t.prototype.resetCountdown=function(){this.turnCountDown=u.skipTurnMaxWait},t}(l.default);t.default=f},554:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(118),i=function(){function e(e,t){var n=this;this.getPlayerRed=function(){return n.playerRed},this.getPlayerGreen=function(){return n.playerGreen},this.areBothPlayersConnected=function(){return!!n.playerRed&&!!n.playerGreen},e&&(this.playerRedSpan=document.getElementById(e)),t&&(this.playerGreenSpan=document.getElementById(t))}return e.prototype.initPlayerNames=function(){var e="Waiting to connect...";this.playerGreenSpan&&!this.playerGreen&&(this.playerGreenSpan.innerText=e),this.playerRedSpan&&!this.playerRed&&(this.playerRedSpan.innerText=e)},e.prototype.clear=function(){this.playerGreenSpan&&(this.playerGreenSpan.innerText=""),this.playerRedSpan&&(this.playerRedSpan.innerText="")},e.prototype.reset=function(){this.playerRed=null,this.playerGreen=null},e.prototype.setPlayerRed=function(e){this.playerRed=e,this.playerRedSpan&&(this.playerRedSpan.innerText=this.playerRed)},e.prototype.setPlayerGreen=function(e){this.playerGreen=e,this.playerGreenSpan&&(this.playerGreenSpan.innerText=this.playerGreen)},e.prototype.indicateTurn=function(e){e===o.Coin.Red?(this.playerRedSpan.classList.add("italic"),this.playerRedSpan.classList.add("underline"),this.playerGreenSpan.classList.remove("italic"),this.playerGreenSpan.classList.remove("underline")):(this.playerGreenSpan.classList.add("italic"),this.playerGreenSpan.classList.add("underline"),this.playerRedSpan.classList.remove("italic"),this.playerRedSpan.classList.remove("underline"))},e}();t.default=i},726:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.x=e,this.y=t}return e.getCursorPosition=function(t,n){var o,i;return void 0!==t.pageX||void 0!==t.pageY?(o=t.pageX,i=t.pageY):(o=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),new e(o-=n.offsetLeft,i-=n.offsetTop)},e}();t.default=n},83:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(833),r=n(263),s=n(998),l=n(721),c=n(461),d=n(118),u=n(365),p=n(583),m=n(663),h=function(e){function t(t){var n=e.call(this,t)||this;return n.setTimer=function(){n.timer&&n.timer.set()},n.continuePreviousGame=function(){n.restoreLastGame(),n.onGameDataCheck()},n.cancelPreviousGame=function(){n.clearGameData(),n.turn=(0,d.randomiseTurn)(),n.onGameDataCheck()},n.canvasMousemove=function(e){n.areBothPlayersConnected()&&(n.currentCoinColumn=n.getColumnFromCursorPosition(e),n.moveCoin())},n.canvasClick=function(e){n.areBothPlayersConnected()&&(n.currentCoinColumn=n.getColumnFromCursorPosition(e),n.landCoin())},n.canvasTouchmove=function(e){if(n.areBothPlayersConnected()){var t=e.changedTouches[0];n.currentCoinColumn=n.getColumnFromCursorPosition(t),n.moveCoin()}},n.exit=function(){n.saveGame(),a.default.closeAllOpenDialogs(),n.timer&&n.timer.stop(),e.prototype.exit.call(n)},n.beforeUnload=function(){n.saveGame()},n.pageVisibilityChange=function(){n.timer&&n.timer.pauseWhenDocumentHidden()},n.handleKeyDown=function(e){n.areBothPlayersConnected()&&(r.default.moveLeftKeys.includes(e.key)&&n.currentCoinColumn>0&&(n.currentCoinColumn--,n.moveCoin()),r.default.moveRightKeys.includes(e.key)&&n.currentCoinColumn<n.board.getColumns()-1&&(n.currentCoinColumn++,n.moveCoin())," "===e.key&&n.landCoin()),"Escape"===e.key&&n.exit()},t.timerId&&(n.timer=new c.default(t.timerId)),n}return i(t,e),t.getInstance=function(e){return t.instance||(t.instance=new t(e)),t.instance},t.prototype.start=function(){this.checkGameData(),this.timerSpan&&this.timerSpan.classList.remove("hidden"),this.countdownSpan&&this.countdownSpan.classList.add("hidden")},t.prototype.onGameDataCheck=function(){this.setUpPlayerNames(),this.areBothPlayersConnected()&&this.setTimer(),e.prototype.start.call(this)},t.prototype.setUpPlayerNames=function(){var e=this;JSON.parse(localStorage.getItem("gameData"))||(m.default.onChange=function(t){var n=parseInt(t);e.board=new p.BoardLogic(n),e.resizeCanvas()},a.default.prompt({id:u.DialogIds.PlayerNames,title:"Input Players",text:["Please enter player names! (10 characters or less.)"],onOK:function(){return function(){var t,n,o=document.getElementById("dialog-input-red"),i=document.getElementById("dialog-input-green");o.value&&i.value&&o.value.trim()&&i.value.trim()&&(null===(t=e.playerNameSection)||void 0===t||t.setPlayerRed(o.value),null===(n=e.playerNameSection)||void 0===n||n.setPlayerGreen(i.value),e.setTimer());var a=document.getElementById("dialog-select-dimensions"),r=parseInt(a.value);e.board=new p.BoardLogic(r)}()},onCancel:this.exit,inputs:[{label:"Player Red",name:"red",type:"text",limit:10,required:!0},{label:"Player Green",name:"green",type:"text",limit:10,required:!0}],selects:[m.default]}))},t.prototype.checkGameData=function(){JSON.parse(localStorage.getItem("gameData"))?a.default.confirm({id:u.DialogIds.ContinueGame,title:null,text:["Do you want to continue playing the previous game?"],yesCallback:this.continuePreviousGame,noCallback:this.cancelPreviousGame,yesColor:"green",noColor:"red"}):(this.turn=(0,d.randomiseTurn)(),this.onGameDataCheck())},t.prototype.restoreLastGame=function(){var e=JSON.parse(localStorage.getItem("gameData"));this.turn=e.nextTurn,this.board=new p.BoardLogic(e.dimensions),this.board.setBoard(e.board),this.timer&&this.timer.setSecondsRunning(e.secondsRunning),this.playerNameSection&&(this.playerNameSection.setPlayerGreen(e.playerGreen),this.playerNameSection.setPlayerRed(e.playerRed))},t.prototype.saveGame=function(){var e,t,n;if(this.areBothPlayersConnected()){var o={nextTurn:this.turn,board:this.board.getBoard(),secondsRunning:null===(e=this.timer)||void 0===e?void 0:e.getSecondsRunning(),playerRed:null===(t=this.playerNameSection)||void 0===t?void 0:t.getPlayerRed(),playerGreen:null===(n=this.playerNameSection)||void 0===n?void 0:n.getPlayerGreen(),dimensions:this.board.getDimensions()};localStorage.setItem("gameData",JSON.stringify(o))}},t.prototype.closeGameAfterWinning=function(){this.clearGameData(),this.timer&&this.timer.stop(),e.prototype.closeGameAfterWinning.call(this)},t.prototype.landCoin=function(){var t,n,o,i;if(this.board.getBoard()[this.currentCoinColumn][0]===d.Coin.Empty){var c=e.prototype.landCoin.call(this);if(this.board.countConsecutiveCoins(this.currentCoinColumn,c,this.turn)>=4){var p="";this.turn===d.Coin.Red?p="".concat(null===(t=this.playerNameSection)||void 0===t?void 0:t.getPlayerRed()," (Red)"):this.turn===d.Coin.Green&&(p="".concat(null===(n=this.playerNameSection)||void 0===n?void 0:n.getPlayerGreen()," (Green)")),this.showWinDialog(p,this.turn),this.closeGameAfterWinning()}else if(this.board.isBoardFull()){var m="".concat(null===(o=this.playerNameSection)||void 0===o?void 0:o.getPlayerRed()," (Red) and ").concat(null===(i=this.playerNameSection)||void 0===i?void 0:i.getPlayerGreen()," (Green) are tied!");a.default.notify({id:u.DialogIds.GameEnd,title:"Tie",text:[m]}),this.closeGameAfterWinning()}else this.switchTurn(),this.context.fillStyle=r.default.getColor(this.turn),this.paintCoinToDrop(this.currentCoinColumn),l.default.playSound(s.Sound.LandCoin);return c}return-1},t.prototype.setGameEvents=function(){e.prototype.setGameEvents.call(this),document.addEventListener("visibilitychange",this.pageVisibilityChange)},t.prototype.cleanUpEvents=function(){e.prototype.cleanUpEvents.call(this),document.removeEventListener("changevisibility",this.pageVisibilityChange)},t.prototype.showWinDialog=function(e,t){var n=new Array;n.push("".concat(e," wins!")),this.timer&&n.push("Time taken: ".concat(this.timer.getTimeInStringFormat())),l.default.playSound(s.Sound.Win),a.default.notify({id:u.DialogIds.GameEnd,text:n,title:"We have a winner!"})},t.prototype.resetValues=function(){e.prototype.resetValues.call(this),this.timer&&this.timer.reset()},t.prototype.clearGameData=function(){localStorage.removeItem("gameData")},t}(r.default);t.default=h},125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(978),i=n(541),a=n(833),r=n(365),s=n(118),l=function(){function e(e){var t=this;this.send=function(e){return t.webSocket.send(JSON.stringify(e))},this.getPlayerColor=function(){return t.playerColor},this.getPlayerName=function(){return t.playerName},this.onMessage=function(e){var n=JSON.parse(e.data);if(s.GameMessage.isInitialMessage(n)){var o=n;t.gameId||(t.gameId=o.gameId),t.playerName||(t.playerName=o.playerName),t.playerColor||(t.playerColor=o.color)}t.onMessageCallback&&t.onMessageCallback(n)},this.onError=function(){t.onErrorCallback(),a.default.closeAllOpenDialogs(),a.default.notify({id:r.DialogIds.ServerError,text:["Problem connecting to server!"],title:"Error"}),document.body.classList.remove("cursor-progress")},this.onClose=function(){var e=o.default.getToken();e&&t.connect(e)},this.connect(e)}return e.prototype.connect=function(e){var t="".concat(i.default.connections.wsServer,"?token=").concat(e.token,"&service=").concat(e.service);this.playerColor&&!isNaN(this.gameId)&&(t+="&playerColor=".concat(this.playerColor,"&gameId=").concat(this.gameId)),this.webSocket=new WebSocket(t),this.webSocket.onmessage=this.onMessage,this.webSocket.onerror=this.onError,this.webSocket.onclose=this.onClose},e.prototype.close=function(){this.webSocket.onclose=null,this.webSocket.onmessage=null,this.webSocket.onerror=null,this.webSocket.close()},e}();t.default=l},461:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.timerCallback=function(){t.secondsRunning++;var e=Math.floor(t.secondsRunning/60),n=t.secondsRunning%60;t.timerSpan.innerText="".concat(e,":").concat(n<10?"0":"").concat(n),t.timerSpan.classList.contains("hidden")&&clearInterval(t.interval)},this.getSecondsRunning=function(){return t.secondsRunning},this.timerSpan=document.getElementById(e),this.secondsRunning=0}return e.prototype.set=function(){this.timerSpan&&(this.timerSpan.classList.remove("hidden"),this.interval=window.setInterval(this.timerCallback,1e3))},e.prototype.stop=function(){this.interval&&(clearInterval(this.interval),this.timerSpan.innerText="",this.timerSpan.classList.add("hidden"))},e.prototype.pauseWhenDocumentHidden=function(){document.hidden?clearInterval(this.interval):this.interval=window.setInterval(this.timerCallback,1e3)},e.prototype.getTimeInStringFormat=function(){return this.timerSpan?this.timerSpan.innerText:""},e.prototype.setSecondsRunning=function(e){this.secondsRunning=e},e.prototype.reset=function(){this.secondsRunning=0},e}();t.default=n},406:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(978),i=n(833),a=n(365);t.default=function(e,t,n){var r=document.getElementById(e),s=document.getElementById(t);r.classList.contains("hidden")||s.classList.contains("hidden")?(o.default.logout(),n(),i.default.closeAllOpenDialogs()):i.default.notify({id:a.DialogIds.LogoutDisabled,title:"Logout Disabled",text:["You may not logout while Network Game is in progress."]})}},196:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(833),i=n(365);t.default=function(){o.default.changelog({id:i.DialogIds.Changelog,title:"Daniel`s Connect4 Version History",releases:[{version:"0.3.8",status:"Beta",dateTime:"",points:[{text:"Internal:",subPoints:["Load game title and version number from config","General code cleanup and refactoring","Introduced Tailwind for more compact CSS by reusing pre-existing classes"]},{text:"UI:",subPoints:["Apply progress cursor until user info request completes","Smaller exit button and reduced the gap between menu buttons","Credits link displayed in small font size","Smaller and smoother font settings and lighter color schemes"]}]},{version:"0.3.7",status:"Beta",dateTime:"19/10/2023 10:15AM Malta time",points:[{text:"Internal:",subPoints:["Upgraded Common library to 0.2","Minor code cleanup"]},{text:"Dialogs:",subPoints:["Fixed regression in dialog inputs making text visible again","Credits as dialog","Menu dialog replacing the slider","Adapted button colors for dark mode","Changelog dialog",'"text" made an optional parameter']},{text:"Opted for official Google signon button in attempt to solve issue with iOS"}]},{version:"0.3.6.1",status:"Beta",dateTime:"08/10/2023 0:30AM Malta time",points:[{text:"Applied quick fix for credits and changelog pages in dark mode"},{text:"Changed dialog text color to white"}]},{version:"0.3.6",status:"Beta",dateTime:"07/10/2023 4:30PM Malta time",points:[{text:"Internal:",subPoints:["Installed Concurrently and combined Webpack and Serve scripts","Code cleanup"]},{text:"UI:",subPoints:["Changed main menu text color to darkblue","Moved version number to button of screen","Smaller menu buttons","Experimental dark mode support"]}]},{version:"0.3.5",status:"Beta",dateTime:"03/10/2023 5:30PM Malta time",points:[{text:"Multiple dimensions"},{text:"Internal:",subPoints:["Code cleanup","Send token in request header"]},{text:"UI:",subPoints:["Consistent look and feel across browsers and transperant borders for buttons","Included favicon in changelog and credits pages","Player stats show in a dialog","Centered inputs in dialogs",'Timer and countdown placeholders differentiated to prevent programmatic "confusion"']},{text:"Logout if Google token is no longer valid"}]},{version:"0.3.4",status:"Beta",dateTime:"05/08/2023 11:00PM Malta time",points:[{text:"Google SSO:",subPoints:["Solve JS error that at times prevented SSO popup to launch","Enable logout button in case of WebSocket connection failure","Retain authentication across page refreshes and browser tabs"]},{text:"Internal: Cleanup localStorage management"}]},{version:"0.3.3",status:"Beta",dateTime:"05/08/2023",points:[{text:"(Responsive) UI:",subPoints:["Solve zoomed in canvas on Chrome for Android","Responsive dialog inputs","Centered dialog titles","Swapped error div for dialogs","Added favicon"]},{text:"Internal:",subPoints:["Installed and configured a micro-web server for dev environment",'Removed redundant "build" script','New "config" file to store environment URLs','Removed "css-loader" and "style-loader" from dev dependencies']},{text:"Introduced Google signon button which is now required for network play"}]},{version:"0.3.2",status:"Beta",dateTime:"23/07/2023",points:[{text:"Dialogs:",subPoints:["Refactored library to accept only one options parameter for all public methods",'Solved the "form not connected" console warning on Chromium-based browsers',"Added title parameter to options",'Notifications are closed when "Escape" or "Enter" keys are pressed']},{text:"Game controls:",subPoints:['Fixed minor issue with keybindings: limit was set 10, now taken from "BoardLogic.columns"',"Touchscreen moves to act like mouse moves"]},{text:"Credits link turned black"},{text:"Error messages for Share icon"},{text:"Updated game instructions and fixed the random line breaks"}]},{version:"0.3.1",status:"Beta",dateTime:"22/07/2023",points:[{text:"Github icon points to my Github profile"},{text:'Email icon subject set to "Connect4"'},{text:"Added links to my official Instagram and Facebook pages"},{text:"Added Share button"},{text:"Change cursor to `progress` while waiting for opponent"},{text:"Introduced keyboard shortcuts during game play"}]},{version:"0.3",status:"Beta",dateTime:"18/07/2023",points:[{text:"Minor UI changes:",subPoints:["Improved board spacing","Empty spots are now light yellow","Menu style and text changes","Changed font to Source-Sans-Pro","Neater top section","Report bugs links","Fixed bug(#30) where last row was not being displayed on smaller screen resolutions","Hovering over buttons turns cursor into pointer"]},{text:"Introduced custom dialogs"},{text:"Player name inputs:",subPoints:["Validation preventing blank player names","Player names restricted to 10 characters"]},{text:"Internal:",subPoints:["Refactoring and code cleanup",'Set up "npm start" script']},{text:"First turn (red/green) selected by random"},{text:"Network mode:",subPoints:["Exit game in case of connection error","Winner is now determined by server","Disabled timer","Removed logic to stop game in case of inactivity",'"Skip turn" is now handled by the server']}]},{version:"0.2.1",status:"Alpha",dateTime:"27/03/2023",points:[{text:"Network mode: Attempt to reconnect after connection is closed"},{text:"Network mode: Cleanup events when connection is closed manually"},{text:"Further refactoring into smaller modules"},{text:"Current turn player is now underlined and italicised"},{text:"Network mode: Inactivity countdown system"}]},{version:"0.2",status:"Alpha",dateTime:"14/02/2023",points:[{text:"Added credits page"},{text:"Noscript notice"},{text:"Minor fix: Removed vertical scrollbar when first visiting main menu"},{text:"Minor code cleanup: Printing coin colors simplified due to string enum as well as some other refactoring"},{text:"Network play"},{text:"Full board detection"},{text:"Sound effects for wins, loses and coin drops"},{text:"UI: Board space distributed more evenly"}]},{version:"0.1.3.1",status:"Alpha",dateTime:"16/01/2023",points:[{text:"Continue UI changes to make it look better as well as improve experience on mobile devices"}]},{version:"0.1.3",status:"Alpha",dateTime:"15/01/2023",points:[{text:"Internal: Configured Webpack to produce a single minified file and sourcemap"},{text:"Minor UI changes: Blue background for player names and version number as link to release notes"},{text:"Fix: Coin responds to moves inline with respective column"},{text:"Improvement: Timer paused when browser tab is inactive"},{text:"Improvement: Dynamic canvas resizing"}]},{version:"0.1.2",status:"Alpha",dateTime:"10/01/2023",points:[{text:"Internal: eliminated inline styles"},{text:"Bug fix: Hidden Exit button when game ends"},{text:"Implement timer on top"},{text:"Heading placed inline"},{text:"Print names for Green and Red players on the top"}]},{version:"0.1.1",status:"Alpha",dateTime:"09/01/2023",points:[{text:"Internal code adjustment (issue 1) - Adjusted board array to read board[col][row]"},{text:"Styled main menu and introduced release notes link"},{text:"Ported save game state feature from the other implementation (cleaner and also saves when closing the page!)"}]},{version:"0.1",status:"Alpha",dateTime:"06/01/2023",points:[{text:"Port from old version adapted to TypeScript syntax and some refactoring (excluding a few features)"},{text:"Fixed bug - clearing marker above the board as mouse moves"},{text:"New - Prompts for names for Red and Green players"}]}]})}},405:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(833),i=n(365);t.default=function(){var e={id:i.DialogIds.Credits,title:"Contributors",sections:[{title:"Development",contributors:["Daniel Desira"]},{title:"Code Review",contributors:["Sergiu Nimat"]},{title:"UI/UX Advice",contributors:["Pierre Borġ","Martina Sultana","Jorge Montalbán","Abigail Magro"]},{title:"Testing",contributors:["George Zaharia","Yazan Enayeh"]}]};o.default.credit(e)}},603:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(833),i=n(365);t.default=function(){o.default.notify({id:i.DialogIds.Instructions,text:["The principle behind Connect4 is simple:","The player who first places 4 coins next to each other, wins. You may match horizontally, vertically or diagonally.","Furthermore, in Network Play, you must place your coin within 60 seconds. If you fail to do so, you pass the turn to your opponent.","Further note that exiting in Same Device Play, saves game progress. You will be presented with the option to continue the same game the next time. This does not work for Network Play because your opponent might not be available the next time and you might not even know him/her/them.","Good luck and have fun playing!"],title:"Instructions"})}},161:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(978),r=n(833),s=n(663),l=n(365);t.default=function(){return o(this,void 0,void 0,(function(){var e,t=this;return i(this,(function(n){switch(n.label){case 0:return s.default.onChange=null,[4,a.default.getSettings()];case 1:return e=n.sent(),s.default.default=e.dimensions,r.default.prompt({id:l.DialogIds.Settings,title:"Settings",text:[],inputs:[],selects:[s.default],onOK:function(){return o(t,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return e=document.getElementById("dialog-select-dimensions"),t=parseInt(e.value),[4,a.default.updateSettings(t)];case 1:return n.sent(),[2]}}))}))},onCancel:null}),[2]}}))}))}},983:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(978),r=n(833),s=n(365),l=n(406),c=n(161);t.default=function(e,t){var n=this;r.default.menu({id:s.DialogIds.AccountMenu,title:e,text:[],buttons:[{text:"Load Stats",callback:function(){return o(n,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,a.default.loadStats()];case 1:return[2,e.sent()]}}))}))},color:"green"},{text:"Settings",callback:c.default,color:"green"},{text:"Logout",callback:function(){return(0,l.default)("board","countdown",t)},color:"red"}]})}},721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isLocal=function(){return"file:"===location.protocol||"localhost"===location.hostname},e.playSound=function(e){new Audio(e).play()},e}();t.default=n}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}(()=>{var e=n(978),t=n(833),o=n(365),i=n(607),a=n(819),r=n(83),s=n(405),l=n(603),c=n(196),d=n(541),u=n(983),p=document.getElementById("samePC"),m=document.getElementById("network"),h=document.getElementById("instructions");function f(e){try{var n={canvasId:"board",exitBtnId:"exitBtn",timerId:"timer",countdownId:"countdown",playerRedId:"playerRed",playerGreenId:"playerGreen",menuId:"menu",gameIndicatorsId:"gameIndicators"};e===i.GameMode.Network?a.default.getInstance(n).start():r.default.getInstance(n).start()}catch(e){t.default.notify({id:o.DialogIds.ServerError,title:"Error",text:["Problem encountered!"]}),console.error(e)}}function g(){var e=document.getElementById("login-btns"),t=document.getElementById("logged-in");localStorage.getItem("auth")?(e.classList.add("hidden"),t.classList.remove("hidden")):(e.classList.remove("hidden"),t.classList.add("hidden"))}function v(){e.default.getUserData().then((function(e){document.getElementById("authPlayerName").innerText=e.user,b.src=e.picUrl})).catch((function(){e.default.logout(),g()})).finally((function(){document.body.classList.remove("cursor-progress")}))}p.addEventListener("click",(function(){f(i.GameMode.SamePC)})),m.addEventListener("click",(function(){f(i.GameMode.Network)})),h.addEventListener("click",l.default),document.getElementById("shareBtn").addEventListener("click",(function(e){if(e.preventDefault(),navigator.canShare){var n={url:location.href,title:"".concat(d.default.title," ").concat(d.default.version)};navigator.share(n).catch((function(e){return console.error("Problem while sharing: ".concat(e))}))}else t.default.notify({id:o.DialogIds.ServerError,title:"Error",text:["Problem opening share menu!"]})})),window.addEventListener("load",(function(){e.default.initGoogleSSO((function(){g(),v()})),e.default.renderGoogleBtn("googleSignonContainer")})),document.getElementById("credits").addEventListener("click",(function(e){e.preventDefault(),(0,s.default)()}));var y=document.getElementById("changelog");y.addEventListener("click",(function(e){e.preventDefault(),(0,c.default)()}));var b=document.getElementById("authPlayerPicture");b.addEventListener("click",(function(){var e=document.getElementById("authPlayerName");(0,u.default)(e.innerText,g)})),g(),v(),y.innerText=d.default.version,document.getElementById("heading").innerText=d.default.title,document.title="".concat(d.default.title," ").concat(d.default.version)})()})();
//# sourceMappingURL=bundle.js.map